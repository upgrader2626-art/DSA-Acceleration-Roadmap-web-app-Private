<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DSA Accelerator Schedule</title>
    <link rel="manifest" href="/manifest.json"> <!-- PWA Manifest -->
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/service-worker.js', {
                        scope: '/'
                    });
                    console.log('SW registered:', registration.scope);
                    
                    // Handle updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // New version available
                                if (confirm('New version available! Reload to update?')) {
                                    window.location.reload();
                                }
                            }
                        });
                    });
                } catch (error) {
                    console.error('SW registration failed:', error);
                }
            });
        }
    </script>
    <meta name="theme-color" content="#4f46e5">
    <!-- iOS / Apple meta -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">

    <!-- Local vendor scripts for offline reliability -->
    <script src="/vendor/jspdf.umd.min.js"></script>
    <script src="/vendor/html2canvas.min.js"></script>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/vendor/jspdf.plugin.autotable.min.js"></script>
    <!-- Use Inter Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif; /* Professional typography */
        }
        /* Color system: professional + feminine palette (variables) */
        :root {
            /* Background - Dark Mode */
            --bg-start: #04021a; /* near-black navy */
            --bg-end:   #260535; /* deep violet */
            /* Cards - Dark Mode */
            --card-bg: rgba(8,6,20,0.62); /* darker translucent card for contrast */
            --card-border: rgba(139,92,246,0.22);
            --card-glow: rgba(124,58,237,0.16);
            /* Accents */
            --accent-main: #ff66b2; /* brighter feminine accent */
            --accent-2: #7c3aed; /* soft indigo */
            --muted: #9ca3af; /* neutral muted */
            /* Text - Dark Mode */
            --text-primary: #ffffff; /* pure white for high contrast */
            --text-secondary: #e9d8ff; /* light lavender */
        }

        /* Light Mode Color Overrides */
        html:not(.dark) {
            /* Background - Light Mode */
            --bg-start: #fdf5ff;
            --bg-end: #fce7f3;
            /* Cards - Light Mode */
            --card-bg: rgba(243, 232, 255, 0.7);
            --card-border: rgba(219, 39, 119, 0.15);
            --card-glow: rgba(236, 72, 153, 0.1);
            /* Text - Light Mode */
            --text-primary: #5b21b6;
            --text-secondary: #a78bfa;
        }

        /* Glassmorphism effect for cards using variables */
        .glass-card {
            background-color: var(--card-bg);
            backdrop-filter: blur(14px) saturate(150%);
            border: 1.5px solid var(--card-border);
            box-shadow: 0 12px 36px 0 var(--card-glow), 0 4px 12px rgba(0,0,0,0.35);
            color: var(--text-primary);
        }
        /* Animation for cards fading and sliding in */
        @keyframes fade-in-slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-slide-up {
            animation: fade-in-slide-up 0.5s ease-out forwards;
        }
        .current-day {
            border-color: var(--accent-main);
            box-shadow: 0 0 34px -6px rgba(219,39,119,0.25);
        }
        /* Ensure the progress bar starts at 0 height to prevent CLS */
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
            height: 100%;
        }
        /* Style for the SVG Progress Ring */
        .progress-ring-arc {
            transition: stroke-dashoffset 0.5s ease-in-out;
            stroke-linecap: round;
        }
        /* Custom animated checkbox */
        .task-checkbox:checked + div {
            background-color: #2563eb; /* Accent 1: blue-600 */
            border-color: #2563eb;
        }
        .task-checkbox:checked + div svg {
            transform: scale(1);
            opacity: 1;
        }
        /* Mobile/touch friendliness */
        button {
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            touch-action: manipulation;
        }
        /* Ensure comfortable tap targets */
        .btn-touch { min-height: 44px; padding-top: 10px; padding-bottom: 10px; }
        /* Small utility classes mapped to variables */
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-accent { color: var(--accent-main); }
        .bg-accent { background: linear-gradient(90deg,var(--accent-main),var(--accent-2)); color: white; }
    .bg-card { background: linear-gradient(135deg, rgba(36,18,54,0.78), rgba(20,8,45,0.55)); border: 1px solid rgba(139,92,246,0.16); }
    .glass-card:hover { transform: translateY(-6px); transition: transform 180ms ease, box-shadow 180ms ease; box-shadow: 0 18px 48px rgba(124,58,237,0.12); }
    .text-accent { color: var(--accent-main); text-shadow: 0 2px 12px rgba(255,102,178,0.08); }
    .bg-accent { box-shadow: 0 6px 24px rgba(124,58,237,0.08); }
        /* Central content card that fills the viewport height */
        .content-card {
            background: linear-gradient(180deg, rgba(20,10,40,0.75), rgba(30,15,50,0.65));
            border-radius: 1.5rem;
            padding: 1.25rem;
            min-height: calc(100vh - 140px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        /* Make main content inside card scrollable while keeping header and footer fixed within the card */
        .content-body { overflow:auto; padding: 0.5rem 0.5rem 2rem 0.5rem; }
        /* Slightly larger day cards and comfortable spacing */
        .day-card-large { padding: 1.25rem; }
        /* Icon tint utility */
        .icon-accent { color: var(--accent-main); }
    </style>
    <script>
        // Immediately set theme to avoid FOUC (Flash of Unstyled Content)
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-fuchsia-50 via-pink-50 to-purple-50 dark:bg-gradient-to-br dark:from-purple-950 dark:via-fuchsia-900 dark:to-indigo-900 text-primary dark:text-pink-100 transition-colors duration-300">
<div class="min-h-screen">
    <!-- Single column layout -->
    <div class="min-h-screen">

        <!-- Main content -->
    <main class="max-w-7xl mx-auto p-6" style="padding-bottom:calc(120px + env(safe-area-inset-bottom));"> <!-- extra bottom padding to avoid footer overlap and iOS safe-area -->
        <!-- Central content card that fills most of the viewport -->
        <div class="content-card mx-auto w-full max-w-full">

            <!-- Enhanced Header -->
            <header class="relative text-center my-8 md:my-12">
                <!-- Decorative floral background (subtle) -->
                <div aria-hidden="true" class="pointer-events-none absolute inset-x-0 -top-8 flex justify-center opacity-30">
                    <svg width="420" height="120" viewBox="0 0 420 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="transform rotate-3">
                        <defs>
                            <linearGradient id="g1" x1="0" x2="1">
                                <stop offset="0%" stop-color="#7c3aed" stop-opacity="0.25"/>
                                <stop offset="100%" stop-color="#ff66b2" stop-opacity="0.15"/>
                            </linearGradient>
                        </defs>
                        <path d="M20 80 C 70 10, 150 10, 210 70 C 270 130, 350 130, 400 80" stroke="url(#g1)" stroke-width="18" stroke-linecap="round"/>
                        <g transform="translate(60,10)">
                            <circle cx="0" cy="0" r="8" fill="#ff66b2" />
                            <circle cx="28" cy="-6" r="6" fill="#f0abfc" />
                        </g>
                    </svg>
                </div>

                <div class="flex flex-col items-center justify-center gap-2">
                    <svg class="w-12 h-12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M12 2C13.1046 2 14 2.89543 14 4C14 5.10457 13.1046 6 12 6C10.8954 6 10 5.10457 10 4C10 2.89543 10.8954 2 12 2Z" fill="#ff66b2"/>
                        <path d="M5 9C6.10457 9 7 9.89543 7 11C7 12.1046 6.10457 13 5 13C3.89543 13 3 12.1046 3 11C3 9.89543 3.89543 9 5 9Z" fill="#7c3aed"/>
                        <path d="M19 9C20.1046 9 21 9.89543 21 11C21 12.1046 20.1046 13 19 13C17.8954 13 17 12.1046 17 11C17 9.89543 17.8954 9 19 9Z" fill="#f0abfc"/>
                    </svg>
                    <h1 class="text-4xl md:text-5xl font-bold tracking-tighter text-primary drop-shadow-lg">Hey Mansi!</h1>
                </div>
                <p class="mt-2 text-lg font-normal text-secondary">Your personalized, daily DSA roadmap. <span aria-hidden="true">üå∏</span></p>
                <p class="mt-4 text-sm text-secondary/80">
                    <span class="font-mono bg-fuchsia-900/30 px-2 py-1 rounded-lg text-secondary/90">Local Mode</span> ‚Ä¢ <span class="font-mono bg-indigo-900/30 px-2 py-1 rounded-lg text-secondary/90">Language: Java</span>
                </p>
                <div class="mt-4 flex justify-center">
                    <span class="px-4 py-2 rounded-xl bg-gradient-to-r from-fuchsia-700 via-pink-500 to-indigo-600 text-white font-semibold shadow-lg border border-pink-400 text-base" style="letter-spacing:0.02em;">
                        ‚ÄúBlooming with grace.‚Äù
                    </span>
                </div>
            </header>

            <!-- KPI Cards Dashboard -->
            <section id="dashboard" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 px-6 mb-6">
                <!-- Overall Progress -->
                <div class="glass-card p-8 rounded-2xl text-center flex flex-col items-center justify-center">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <svg class="w-6 h-6 text-accent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2v6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 12h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 22v-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <p class="text-xs font-semibold uppercase text-secondary">Overall Progress</p>
                    </div>
                    <p id="total-progress-text" class="text-4xl font-bold text-accent drop-shadow">0%</p>
                    <p id="total-progress-count" class="text-sm text-secondary mt-2">0/292 Tasks</p>
                </div>
                <!-- Current Streak -->
                <div class="glass-card p-8 rounded-2xl text-center flex flex-col items-center justify-center">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <svg class="w-6 h-6 text-accent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 3c.7 1.2 2 2 4 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 12a9 9 0 11-9-9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <p class="text-xs font-semibold uppercase text-secondary">Current Streak</p>
                    </div>
                    <p class="text-4xl font-bold text-accent drop-shadow"><span id="current-streak">0</span></p>
                    <p class="text-sm text-secondary mt-2">Days in a Row</p>
                </div>
                <!-- Total Roadmap -->
                <div class="glass-card p-8 rounded-2xl text-center flex flex-col items-center justify-center">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <svg class="w-6 h-6 text-accent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="4" width="18" height="16" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M16 2v4M8 2v4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <p class="text-xs font-semibold uppercase text-secondary">Total Roadmap</p>
                    </div>
                    <p id="days-scheduled" class="text-4xl font-bold text-accent drop-shadow">100</p>
                    <p class="text-sm text-secondary mt-2">Days Planned</p>
                </div>
                <!-- Completion Rate -->
                <div class="glass-card p-8 rounded-2xl text-center flex flex-col items-center justify-center">
                    <div class="flex items-center justify-center gap-2 mb-4">
                        <svg class="w-6 h-6 text-accent" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <p class="text-xs font-semibold uppercase text-secondary">Completion Rate</p>
                    </div>
                    <p id="completion-rate" class="text-4xl font-bold text-accent drop-shadow">0%</p>
                    <p class="text-sm text-secondary mt-2">Tasks Completed</p>
                </div>
            </section>

            <!-- Main App Content -->
            <div id="app" class="pt-4 pb-16 content-body">
                <!-- Loading & Error Status -->
                <div id="status-message" class="bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700/50 text-yellow-800 dark:text-yellow-200 p-4 mb-6 hidden rounded-xl" role="alert">
                    <p class="font-medium text-yellow-400">Loading Data...</p>
                    <p id="status-text" class="mt-1 text-yellow-200/80 text-sm">Connecting to the database and loading your progress.</p>
                </div>

                <!-- Schedule List -->
                <div id="schedule-list" class="space-y-6 px-4">
                    <!-- Schedule items will be dynamically injected here -->
                </div>
            </div>

            <!-- Footer -->
            <footer class="bg-white/60 dark:bg-black/30 backdrop-blur-md border-t border-slate-200/50 dark:border-white/10 py-4 shadow-lg" style="position:fixed;left:0;right:0;bottom:0;z-index:9999;">
                <div class="w-full px-4 flex flex-col md:flex-row items-center justify-between gap-3 md:gap-0">
                    <!-- Left corner: app name and author -->
                    <div class="flex items-center gap-4">
                        <div class="text-sm text-secondary/80 text-left">
                            <p class="font-semibold">DSA Acceleration Roadmap</p>
                            <p class="text-xs text-secondary/60">Made by Diwakar Mishra ‚Ä¢ ¬© 2025</p>
                        </div>
                    </div>

                    <!-- Right corner: action buttons -->
                    <div class="flex items-center gap-2">
                        <button id="install-btn" onclick="window.promptInstall && window.promptInstall()" class="px-3 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition btn-touch hidden" aria-hidden="true" aria-label="Install DSA Roadmap">Install App</button>
                        <button id="customize-btn" onclick="window.showCustomizeModal()" class="px-3 py-2 bg-accent text-white rounded-lg hover:bg-pink-500 transition btn-touch flex items-center gap-2">
                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            Customize
                        </button>
                        <button id="download-report-btn" onclick="window.downloadReport()" class="px-3 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 btn-touch">
                            <span>Download</span>
                            <svg id="download-spinner" class="hidden animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </button>
                        <button id="reset-progress-btn" onclick="window.showResetModal()" class="px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition btn-touch flex items-center gap-2">
                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 6h18M8 6v12a2 2 0 002 2h4a2 2 0 002-2V6M10 6V4a2 2 0 012-2h0a2 2 0 012 2v2" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            Reset
                        </button>
                        <button id="theme-toggle" type="button" aria-label="Toggle color theme" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 transition btn-touch">
                            <!-- moon (dark) / sun (light) icons: we'll show one depending on current theme -->
                            <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                            <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 5.05a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                        </button>
                    </div>
                </div>
            </footer>

        </div> <!-- /.content-card -->
        </main>

    <!-- Theme toggle script and improved dark-mode styles -->
    <style>
        /* Dark-mode refinements for glass look */
        .glass-card {
            transition: background 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
        }
        /* Make footer buttons adapt smoothly */
        #theme-toggle { transition: background-color 200ms ease, color 200ms ease; }
    </style>

    <script>
        (function(){
            // Elements
            const themeToggleBtn = document.getElementById('theme-toggle');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');

            // Initialize icons and aria state based on current theme
            function setIcons() {
                const isDark = document.documentElement.classList.contains('dark');
                if (isDark) {
                    darkIcon.classList.add('hidden');
                    lightIcon.classList.remove('hidden');
                    themeToggleBtn.setAttribute('aria-pressed', 'true');
                } else {
                    darkIcon.classList.remove('hidden');
                    lightIcon.classList.add('hidden');
                    themeToggleBtn.setAttribute('aria-pressed', 'false');
                }
            }

            // Toggle theme and persist
            function toggleTheme() {
                const isDark = document.documentElement.classList.toggle('dark');
                try { localStorage.theme = isDark ? 'dark' : 'light'; } catch (e) {}
                setIcons();
            }

            // attach handler
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', toggleTheme);
                // run once on load
                setIcons();
            }
        })();
    </script>

    <!-- 1. Reset Confirmation Modal -->
    <div id="reset-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 p-4 items-center justify-center z-50" role="dialog" aria-modal="true" aria-labelledby="reset-modal-title">
        <div class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 p-8 rounded-xl shadow-2xl max-w-sm w-full border border-gray-200 dark:border-gray-700 mx-auto">
            <h3 id="reset-modal-title" class="text-xl font-bold text-red-500 dark:text-red-400 mb-4">Confirm Reset</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-6">Are you sure you want to reset all your DSA progress? This action cannot be undone.</p>
            <div class="flex justify-end space-x-3">
                <button onclick="window.hideResetModal()" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 font-medium rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                    Cancel
                </button>
                <button onclick="window.resetProgress()" class="px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition">
                    Yes, Reset
                </button>
            </div>
        </div>
    </div>
    
    <!-- 2. Customize Schedule Modal -->
    <div id="customize-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 p-4 z-50 overflow-y-auto" role="dialog" aria-modal="true" aria-labelledby="customize-modal-title">
        <div class="bg-white dark:bg-gray-900 p-8 rounded-2xl shadow-2xl max-w-4xl w-full text-gray-800 dark:text-gray-100 border border-gray-200 dark:border-gray-700 mx-auto my-8">
            <div class="flex justify-between items-center mb-6 border-b border-gray-200 dark:border-gray-700 pb-3">
                <h3 id="customize-modal-title" class="text-2xl font-extrabold text-gray-800 dark:text-white">Customize DSA Schedule (Max 30 Days)</h3>
                <button onclick="window.hideCustomizeModal()" class="text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
            </div>

            <p class="text-sm text-gray-500 dark:text-gray-300 mb-4">You can override or extend the schedule. **Note:** Only the structure is saved; task completion status is separate. You can edit up to 30 days at a time.</p>
            
            <form id="schedule-form" onsubmit="window.saveCustomSchedule(event)">
                <div id="days-container" class="space-y-6">
                    <!-- Custom day fields will be inserted here -->
                </div>
                
                <div class="flex justify-between items-center mt-6 pt-4 border-t">
                    <div class="flex-shrink-0">
                        <button type="button" id="add-day-btn" onclick="window.addDaySection()" class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-500 transition duration-200 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                            Add New Day
                        </button>
                        <p id="customize-limit-message" class="text-xs text-red-500 mt-2 hidden">Maximum limit reached. Save to continue adding more days.</p>
                    </div>
                    <button type="submit" class="px-6 py-3 bg-emerald-500 text-white font-bold rounded-lg shadow-md hover:bg-emerald-600 transition duration-200">
                        Save Custom Schedule
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Local Storage Scripting (Replaced Firebase) -->
    <script>
    // IIFE to encapsulate all application logic and avoid polluting the global scope
    (function() {
        let schedule_java = []; // Store Java schedule
        let customSchedule = [];
        let mergedSchedule = [];
        let startDateStr; 
        const MAX_CUSTOM_DAYS = 30; // Max days allowed in the customization tool at once.
        const CIRCUMFERENCE = 2 * Math.PI * 45; // Circumference for SVG ring with r=45

        // --- Core DSA Schedule Data (Days 1-74) ---

        // Java Schedule Data (Updated Days 1-10)
        const DEFAULT_SCHEDULE_JAVA = [ // 100-day plan
            { day: 1, title: "Introduction to Programming", note: "", tasks: [ // Day 1
                { desc: "Introduction to Programming - Types of Languages, Memory Management", type: "Video", link: "https://www.youtube.com/watch?v=wn49bJOYAZM&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=5&pp=iAQB", resource: "YouTube" },
                { desc: "What is Programming?", type: "Article", link: "https://www.geeksforgeeks.org/c/compiling-a-c-program-behind-the-scenes/", resource: "GFG" },
                { desc: "Memory layout basics", type: "Article", link: "https://www.geeksforgeeks.org/memory-layout-of-c-program/", resource: "GFG" },
            ]},
            { day: 2, title: "Flow of Program - Flowcharts & Pseudocode", note: "", tasks: [ // Day 2
                { desc: "Flow of Program - Flowcharts & Pseudocode", type: "Video", link: "https://www.youtube.com/watch?v=lhELGQAV4gg&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=6&pp=iAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "Flowcharts", type: "Article", link: "https://www.geeksforgeeks.org/competitive-programming/an-introduction-to-flowcharts/", resource: "GFG" },
                { desc: "Pseudocode", type: "Article", link: "https://www.geeksforgeeks.org/dsa/what-is-pseudocode-a-complete-tutorial/", resource: "GFG" },
                { desc: "Create flowchart for max of 3 numbers", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 3, title: "Introduction to Java - Architecture & Installation", note: "", tasks: [ // Day 3
                { desc: "Introduction to Java - Architecture & Installation", type: "Video", link: "https://www.youtube.com/watch?v=4EP8YzcN0hQ&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=7&pp=iAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "JDK vs JRE vs JVM", type: "Article", link: "https://www.geeksforgeeks.org/differences-jdk-jre-jvm/", resource: "GFG" },
                { desc: "How Java works internally", type: "Article", link: "https://www.geeksforgeeks.org/java/how-jvm-works-jvm-architecture/", resource: "Self-Study" },
                { desc: "Install JDK + VS Code", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 4, title: "First Java Program - Input/Output, Debugging and Datatypes", note: "", tasks: [ // Day 4
                { desc: "First Java Program - Input/Output, Debugging and Datatypes", type: "Video", link: "https://www.youtube.com/watch?v=TAtrPoaJ7gc&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=8&pp=iAQB", resource: "YouTube" },
                { desc: "Datatypes", type: "Article", link: "https://www.w3schools.com/java/java_data_types.asp", resource: "W3Schools" },
                { desc: "Input/Output", type: "Article", link: "https://www.geeksforgeeks.org/java/java-io-input-output-in-java-with-examples/", resource: "GFG" },
                { desc: "FizzBuzz", type: "Easy Problem", link: "https://leetcode.com/problems/fizz-buzz/", resource: "LeetCode" },
                { desc: "Running Sum of 1d Array", type: "Easy Problem", link: "https://leetcode.com/problems/running-sum-of-1d-array/", resource: "LeetCode" },
            ]},
            { day: 5, title: "Conditionals and Loops", note: "", tasks: [ // Day 5
                { desc: "Conditionals and Loops + Calculator Program", type: "Video", link: "https://www.youtube.com/watch?v=ldYLYRNaucM&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=9&pp=iAQB", resource: "YouTube" },
                { desc: "Conditions", type: "Article", link: "https://www.w3schools.com/java/java_conditions.asp", resource: "W3Schools" },
                { desc: "Loops", type: "Article", link: "https://www.w3schools.com/java/java_for_loop.asp", resource: "W3Schools" },
                { desc: "Number of Steps to Reduce a Number to Zero", type: "Easy Problem", link: "https://leetcode.com/problems/number-of-steps-to-reduce-a-number-to-zero/", resource: "LeetCode" },
            ]},
            { day: 6, title: "Switch Statements", note: "", tasks: [ // Day 6
                { desc: "Switch Statements + Nested Case in Java", type: "Video", link: "https://www.youtube.com/watch?v=mA23x39DjbI&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=10&pp=iAQB", resource: "YouTube" },
                { desc: "Switch", type: "Article", link: "https://www.w3schools.com/java/java_switch.asp", resource: "W3Schools" },,
            ]},
            { day: 7, title: "Functions / Methods in Java", note: "", tasks: [ // Day 7
                { desc: "Functions / Methods in Java", type: "Video", link: "https://www.youtube.com/watch?v=vvanI8NRlSI&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=11&pp=iAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "Java Methods", type: "Article", link: "https://www.w3schools.com/java/java_methods.asp", resource: "W3Schools" },
                { desc: "Reverse Integer", type: "Medium Problem", link: "https://leetcode.com/problems/reverse-integer/", resource: "LeetCode" },
            ]},
            { day: 8, title: "Strings and StringBuilder in Java", note: "", tasks: [ // Day 8
                { desc: "Strings and StringBuilder in Java", type: "Video", link: "https://www.youtube.com/watch?v=zL1DPZ0Ovlo&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=21&pp=iAQB", resource: "YouTube" },
                { desc: "String vs StringBuilder", type: "Article", link: "https://www.geeksforgeeks.org/java/string-vs-stringbuilder-vs-stringbuffer-in-java/", resource: "GFG" },
                { desc: "Valid Palindrome", type: "Easy Problem", link: "https://leetcode.com/problems/valid-palindrome/", resource: "LeetCode" },
                { desc: "Longest Common Prefix", type: "Easy Problem", link: "https://leetcode.com/problems/longest-common-prefix/", resource: "LeetCode" },
            ]},
            { day: 9, title: "OOP 1 | Introduction & Concepts", note: "", tasks: [ // Day 9
                { desc: "OOP 1 | Introduction & Concepts - Classes, Objects, Constructors, Keywords", type: "Video", link: "https://www.youtube.com/watch?v=BSVKUk58K6U&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=37&pp=iAQB", resource: "YouTube" },
                { desc: "Java OOP", type: "Article", link: "https://www.geeksforgeeks.org/java/object-oriented-programming-oops-concept-in-java/", resource: "Javatpoint" },
                { desc: "Create your own Student class", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 10, title: "OOP 2 | Packages, Static, Singleton", note: "", tasks: [ // Day 10
                { desc: "OOP 2 | Packages, Static, Singleton Class, In-built Methods", type: "Video", link: "https://www.youtube.com/watch?v=_Ya6CN13t8k&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=38&pp=iAQB", resource: "YouTube" },
                { desc: "Static in Java", type: "Article", link: "https://www.geeksforgeeks.org/static-keyword-java/", resource: "GFG" },
            ]},
            { day: 11, title: "OOP 3 | Principles - Inheritance, Polymorphism, Encapsulation, Abstraction", note: "", tasks: [ // Day 11
                { desc: "OOP 3 (Part 1) | Inheritance, Polymorphism", type: "Video", link: "https://www.youtube.com/watch?v=46T2wD3IuhM&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=39&pp=iAQB", resource: "YouTube" },
                { desc: "OOP 3 (Part 2) | Encapsulation, Abstraction", type: "Video", link: "https://www.youtube.com/watch?v=46T2wD3IuhM&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=39&pp=iAQB", resource: "YouTube" },
                { desc: "Inheritance", type: "Article", link: "https://www.w3schools.com/java/java_inheritance.asp", resource: "W3Schools" },
                { desc: "Polymorphism", type: "Article", link: "https://www.w3schools.com/java/java_polymorphism.asp", resource: "W3Schools" },
                { desc: "Encapsulation", type: "Article", link: "https://www.w3schools.com/java/java_encapsulation.asp", resource: "W3Schools" },
                { desc: "Abstraction", type: "Article", link: "https://www.geeksforgeeks.org/java/abstraction-in-java-2/", resource: "GFG" },
            ]},
            { day: 12, title: "OOP 4 | Access Control, In-built Packages", note: "", tasks: [ // Day 12
                { desc: "OOP 4 | Access Control, In-built Packages, Object Class", type: "Video", link: "https://www.youtube.com/watch?v=W145DXs8fFg&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=40&pp=iAQB", resource: "YouTube" },
                { desc: "Access modifiers", type: "Article", link: "https://www.geeksforgeeks.org/java/access-modifiers-java/", resource: "GFG" },
            ]},
            { day: 13, title: "OOP 5 | Abstract Classes, Interfaces", note: "", tasks: [ // Day 13
                { desc: "OOP 5 | Abstract Classes, Interfaces, Annotations", type: "Video", link: "https://www.youtube.com/watch?v=rgHZa7-Dibg&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=41&pp=iAQB", resource: "YouTube" },
                { desc: "Interface vs Abstract", type: "Article", link: "https://www.geeksforgeeks.org/difference-between-abstract-class-and-interface-in-java/", resource: "GFG" },
            ]},
            { day: 14, title: "OOP 6 | Generics, Lambda, Exception Handling", note: "", tasks: [ // Day 14
                { desc: "OOP 6 | Generics, Custom ArrayList, Lambda Expressions, Exception Handling, Object Cloning", type: "Video", link: "https://www.youtube.com/watch?v=OY2lPr8h93U&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=42&pp=iAQB", resource: "YouTube" },
                { desc: "Generics", type: "Article", link: "https://www.geeksforgeeks.org/generics-in-java/", resource: "GFG" },
                { desc: "Exceptions", type: "Article", link: "https://www.w3schools.com/java/java_try_catch.asp", resource: "W3Schools" },
            ]},
            { day: 15, title: "OOP 7 | Collections Framework", note: "", tasks: [ // Day 15
                { desc: "OOP 7 | Collections Framework, Vector Class, Enums in Java", type: "Video", link: "https://www.youtube.com/watch?v=9ogGan-R1pc&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=43&pp=iAQB", resource: "YouTube" },
                { desc: "Collections", type: "Article", link: "https://www.geeksforgeeks.org/java/java-collection-tutorial/", resource: "GFG" },
                { desc: "Contains Duplicate", type: "Easy Problem", link: "https://leetcode.com/problems/contains-duplicate/", resource: "LeetCode" },
                { desc: "Two Sum", type: "Easy Problem", link: "https://leetcode.com/problems/two-sum/", resource: "LeetCode" },
            ]},
            { day: 16, title: "Linear Search Algorithm", note: "", tasks: [ // Day 16
                { desc: "Linear Search Algorithm - Theory + Code + Questions", type: "Video", link: "https://www.youtube.com/watch?v=_HRA37X8N_Q&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=13&pp=iAQB", resource: "YouTube" },
                { desc: "Linear Search", type: "Article", link: "https://www.geeksforgeeks.org/linear-search/", resource: "GFG" },
                { desc: "Search Insert Position", type: "Easy Problem", link: "https://leetcode.com/problems/search-insert-position/", resource: "LeetCode" },
            ]},
            { day: 17, title: "Binary Search Algorithm", note: "", tasks: [ // Day 17
                { desc: "Binary Search Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=f6UU7V3szVw&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=14&pp=iAQB", resource: "YouTube" },
                { desc: "Binary Search", type: "Article", link: "https://www.geeksforgeeks.org/binary-search/", resource: "GFG" },
                { desc: "Binary Search", type: "Easy Problem", link: "https://leetcode.com/problems/binary-search/", resource: "LeetCode" },
            ]},
            { day: 18, title: "Binary Search Interview Questions", note: "", tasks: [ // Day 18
                { desc: "Binary Search Interview Questions (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=W9QJ8HaRvJQ&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=15&pp=iAQB", resource: "YouTube" },
                { desc: "Binary Search Interview Questions (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=W9QJ8HaRvJQ&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=15&pp=iAQB", resource: "YouTube" },
                { desc: "Peak Element", type: "Article", link: "https://www.geeksforgeeks.org/dsa/find-a-peak-in-a-given-array/", resource: "GFG" },
                { desc: "Find Peak Element", type: "Medium Problem", link: "https://leetcode.com/problems/find-peak-element/", resource: "LeetCode" },
                { desc: "Search in Rotated Sorted Array", type: "Medium Problem", link: "https://leetcode.com/problems/search-in-rotated-sorted-array/", resource: "LeetCode" },
            ]},
            { day: 19, title: "Binary Search in 2D Arrays", note: "", tasks: [ // Day 19
                { desc: "Binary Search in 2D Arrays", type: "Video", link: "https://www.youtube.com/watch?v=enI_KyGLYPo&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=16&pp=iAQB", resource: "YouTube" },
                { desc: "Search in a row-wise and column-wise sorted 2D array", type: "Article", link: "https://www.geeksforgeeks.org/dsa/search-in-row-wise-and-column-wise-sorted-matrix/", resource: "GFG" },
                { desc: "Search a 2D Matrix", type: "Medium Problem", link: "https://leetcode.com/problems/search-a-2d-matrix/", resource: "LeetCode" },
            ]},
            { day: 20, title: "Bubble Sort Algorithm", note: "", tasks: [ // Day 20
                { desc: "Bubble Sort Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=F5MZyqRp_IM&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=17&pp=iAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "Bubble Sort", type: "Article", link: "https://www.geeksforgeeks.org/bubble-sort/", resource: "GFG" },
                { desc: "Sort Colors", type: "Medium Problem", link: "https://leetcode.com/problems/sort-colors/", resource: "LeetCode" },
            ]},
            { day: 21, title: "Selection Sort Algorithm", note: "", tasks: [ // Day 21
                { desc: "Selection Sort Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=Nd4SCCIHFWk&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=18&pp=iAQB", resource: "YouTube" },
                { desc: "Selection Sort", type: "Article", link: "https://www.geeksforgeeks.org/selection-sort/", resource: "GFG" },
            ]},
            { day: 22, title: "Insertion Sort Algorithm", note: "", tasks: [ // Day 22
                { desc: "Insertion Sort Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=By_5-RRqVeE&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=19&pp=iAQB", resource: "YouTube" },
                { desc: "Insertion Sort", type: "Article", link: "https://www.geeksforgeeks.org/insertion-sort/", resource: "GFG" },
                { desc: "Insertion Sort List", type: "Medium Problem", link: "https://leetcode.com/problems/insertion-sort-list/", resource: "LeetCode" },
            ]},
            { day: 23, title: "Cycle Sort", note: "", tasks: [ // Day 23
                { desc: "Cycle Sort - Amazon, Google, Microsoft Interview Questions", type: "Video", link: "https://www.youtube.com/watch?v=JfinxytTYFQ&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=20&pp=iAQB", resource: "YouTube" },
                { desc: "Cycle Sort", type: "Article", link: "https://www.geeksforgeeks.org/cycle-sort/", resource: "GFG" },
                { desc: "Missing Number", type: "Easy Problem", link: "https://leetcode.com/problems/missing-number/", resource: "LeetCode" },
                { desc: "Set Mismatch", type: "Easy Problem", link: "https://leetcode.com/problems/set-mismatch/", resource: "LeetCode" },
                { desc: "First Missing Positive", type: "Hard Problem", link: "https://leetcode.com/problems/first-missing-positive/", resource: "LeetCode" },
            ]},
            { day: 24, title: "Time and Space Complexity", note: "", tasks: [ // Day 24
                { desc: "Time and Space Complexity COMPLETE Tutorial (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=mV3wrLBbuuE&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=24&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Time and Space Complexity (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=mV3wrLBbuuE&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=24&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Analysis of Algorithms | Big-O Analysis", type: "Article", link: "https://www.geeksforgeeks.org/dsa/analysis-algorithms-big-o-analysis/", resource: "GFG" },
                { desc: "Calculate Big-O of nested loops", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 25, title: "Bitwise Operators + Number Systems", note: "", tasks: [ // Day 25
                { desc: "Bitwise Operators + Number Systems - Maths for DSA (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=fzip9Aml6og&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=25&t=329s&pp=gAQBiAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "Bitwise Operators + Number Systems - Maths for DSA (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=fzip9Aml6og&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=25&t=329s&pp=gAQBiAQB0gcJCQMKAYcqIYzv", resource: "YouTube" },
                { desc: "Bitwise Operators", type: "Article", link: "https://www.geeksforgeeks.org/bitwise-operators-in-c-cpp/", resource: "GFG" },
                { desc: "Single Number", type: "Easy Problem", link: "https://leetcode.com/problems/single-number/", resource: "LeetCode" },
                { desc: "Number of 1 Bits", type: "Easy Problem", link: "https://leetcode.com/problems/number-of-1-bits/", resource: "LeetCode" },
            ]},
            { day: 26, title: "Maths for Data Structures & Algorithms", note: "", tasks: [
                { desc: "Maths for Data Structures & Algorithms", type: "Video", link: "https://www.youtube.com/watch?v=F6T3tD8Pw40&list=PL9gnSGHSqcnr_DxHsP7AW9ftq0AtAyYqJ&index=26&pp=iAQB", resource: "YouTube" },
                { desc: "Maths for CP", type: "Article", link: "https://www.geeksforgeeks.org/dsa/math-in-competitive-programming/", resource: "GFG" },
                { desc: "Count Primes", type: "Easy Problem", link: "https://leetcode.com/problems/count-primes/", resource: "LeetCode" },
                { desc: "Power of Two", type: "Easy Problem", link: "https://leetcode.com/problems/power-of-two/", resource: "LeetCode" },
            ]},
            { day: 27, title: "Solve Any Pattern Question", note: "", tasks: [
                { desc: "Solve Any Pattern Question With This Trick!", type: "Video", link: "https://www.youtube.com/watch?v=lsOOs5J8ycw&pp=iAQB", resource: "YouTube" },
                { desc: "Pattern printing basics", type: "Article", link: "https://www.programiz.com/java-programming/examples/pyramid-pattern", resource: "Programiz" },
                { desc: "Practice 10 patterns", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 28, title: "Introduction to Recursion", note: "", tasks: [
                { desc: "Introduction to Recursion - Learn In The Best Way", type: "Video", link: "https://www.youtube.com/watch?v=M2uO2nMT0Bk&pp=iAQB", resource: "YouTube" },
                { desc: "Recursion basics", type: "Article", link: "https://www.geeksforgeeks.org/recursion/", resource: "GFG" },
                { desc: "Fibonacci", type: "Easy Problem", link: "https://leetcode.com/problems/fibonacci-number/", resource: "LeetCode" },
            ]},
            { day: 29, title: "Recursion Level 1", note: "", tasks: [
                { desc: "Recursion - Level 1 Questions (Theory + Code + Tips)", type: "Video", link: "https://www.youtube.com/watch?v=ngCos392W4w&pp=iAQB", resource: "YouTube" },
                { desc: "Stack frames", type: "Article", link: "https://www.geeksforgeeks.org/computer-organization-architecture/stack-frame-in-computer-organization/", resource: "GFG" },
                { desc: "Sum of digits / reverse number", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 30, title: "Recursion - Array Questions", note: "", tasks: [
                { desc: "Recursion - Array Questions (Theory + Code + Tips)", type: "Video", link: "https://www.youtube.com/watch?v=YJ9M0L6o9jg&pp=iAQB", resource: "YouTube" },
                { desc: "Recursion on arrays", type: "Article", link: "https://www.geeksforgeeks.org/dsa/sum-array-elements-using-recursion/", resource: "GFG" },
                { desc: "Check Sorted", type: "Easy Problem", link: "https://leetcode.com/problems/check-if-array-is-sorted-and-rotated/", resource: "LeetCode" },
            ]},
            { day: 31, title: "Recursive Patterns + Sorting", note: "", tasks: [
                { desc: "Recursion - Pattern Questions + Bubble Sort + Selection Sort", type: "Video", link: "https://www.youtube.com/watch?v=ymgnIIclCF0&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=31&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Recursive sorting basics", type: "Article", link: "https://www.geeksforgeeks.org/recursive-bubble-sort/", resource: "GFG" },
            ]},
            { day: 32, title: "Merge Sort Using Recursion", note: "", tasks: [
                { desc: "Merge Sort Using Recursion (Theory + Complexity + Code)", type: "Video", link: "https://www.youtube.com/watch?v=ogjf7ORKfd8&pp=iAQB", resource: "YouTube" },
                { desc: "Merge Sort", type: "Article", link: "https://www.geeksforgeeks.org/merge-sort/", resource: "GFG" },
                { desc: "Sort List", type: "Medium Problem", link: "https://leetcode.com/problems/sort-list/", resource: "LeetCode" },
            ]},
            { day: 33, title: "Quick Sort Using Recursion", note: "", tasks: [
                { desc: "Quick Sort Using Recursion (Theory + Complexity + Code)", type: "Video", link: "https://www.youtube.com/watch?v=7h1s2SojIRw&pp=iAQB", resource: "YouTube" },
                { desc: "Quick Sort", type: "Article", link: "https://www.geeksforgeeks.org/quick-sort/", resource: "GFG" },
            ]},
            { day: 34, title: "Subsets / Subsequence / Strings", note: "", tasks: [
                { desc: "Recursion Subset, Subsequence, String Questions", type: "Video", link: "https://www.youtube.com/watch?v=gdifkIwCJyg&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=34&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Power set", type: "Article", link: "https://www.geeksforgeeks.org/power-set/", resource: "GFG" },
                { desc: "Subsets", type: "Medium Problem", link: "https://leetcode.com/problems/subsets/", resource: "LeetCode" },
            ]},
            { day: 35, title: "Permutations", note: "", tasks: [
                { desc: "Recursion - Permutations (Theory + Code + Tips)", type: "Video", link: "https://www.youtube.com/watch?v=s7AvT7cGdSo&pp=iAQB", resource: "YouTube" },
                { desc: "Permutation generation", type: "Article", link: "https://www.geeksforgeeks.org/heaps-algorithm-for-generating-permutations/", resource: "GFG" },
                { desc: "Permutations", type: "Medium Problem", link: "https://leetcode.com/problems/permutations/", resource: "LeetCode" },
            ]},
            { day: 36, title: "Backtracking + Maze", note: "", tasks: [
                { desc: "Backtracking Introduction + Maze Problems - Theory + Code + Tips", type: "Video", link: "https://www.youtube.com/watch?v=zg5v2rlV1tM&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=36&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Backtracking explanation", type: "Article", link: "https://www.youtube.com/watch?v=zg5v2rlV1tM&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=36&pp=gAQBiAQB", resource: "GFG" },
                { desc: "Word Search", type: "Medium Problem", link: "https://leetcode.com/problems/word-search/", resource: "LeetCode" },
            ]},
            { day: 37, title: "Dice Throw + Letter Combinations", note: "", tasks: [
                { desc: "Recursion Google, Amazon Questions: Dice Throw & Letter Combinations of a Phone Number", type: "Video", link: "https://www.youtube.com/watch?v=0snEunUacZY&pp=iAQB", resource: "YouTube" },
                { desc: "Combinations theory", type: "Article", link: "https://www.geeksforgeeks.org/print-all-combinations-of-given-length/", resource: "GFG" },
                { desc: "Letter Combinations", type: "Medium Problem", link: "https://leetcode.com/problems/letter-combinations-of-a-phone-number/", resource: "LeetCode" },
            ]},
            { day: 38, title: "Backtracking Advanced (N Queens + Sudoku)", note: "", tasks: [
                { desc: "N-Queens, N-Knights, Sudoku Solver (LeetCode) - Backtracking Questions", type: "Video", link: "https://www.youtube.com/watch?v=xFv_Hl4B83A&pp=iAQB", resource: "YouTube" },
                { desc: "N Queens", type: "Article", link: "https://www.geeksforgeeks.org/n-queen-problem-backtracking-3/", resource: "GFG" },
                { desc: "Sudoku Solver", type: "Hard Problem", link: "https://leetcode.com/problems/sudoku-solver/", resource: "LeetCode" },
            ]},
            { day: 39, title: "Recursion Revision Day", note: "", tasks: [
                { desc: "Rewatch unclear parts", type: "Revision", link: "#", resource: "Self-Study" },
                { desc: "Dry run subsets, permutations, N-Queens", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Combination Sum", type: "Medium Problem", link: "https://leetcode.com/problems/combination-sum/", resource: "LeetCode" },
            ]},
            { day: 40, title: "Sorting + Recursion Mini Test", note: "", tasks: [
                { desc: "Write merge sort from scratch", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Write quicksort from scratch", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Sort Colors", type: "Medium Problem", link: "https://leetcode.com/problems/sort-colors/", resource: "LeetCode" },
                { desc: "Merge Sorted Array", type: "Easy Problem", link: "https://leetcode.com/problems/merge-sorted-array/", resource: "LeetCode" },
            ]},
            { day: 41, title: "Maths for DSA (Revision)", note: "", tasks: [
                { desc: "Maths for Data Structures & Algorithms (revise part)", type: "Video", link: "https://www.youtube.com/watch?v=lmSpZ0bjCyQ&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=26&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Happy Number", type: "Easy Problem", link: "https://leetcode.com/problems/happy-number/", resource: "LeetCode" },
            ]},
            { day: 42, title: "Recursion ‚Äî Patterns + Sorting Revision", note: "", tasks: [
                { desc: "Recursion ‚Äî Patterns + Sorting Revision", type: "Video", link: "https://www.youtube.com/watch?v=ymgnIIclCF0&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=31&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Print patterns recursively", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 43, title: "Quick Revision of All Recursion Fundamentals", note: "", tasks: [
                { desc: "Quick Revision of All Recursion Fundamentals", type: "Video", link: "https://www.youtube.com/watch?v=M2uO2nMT0Bk&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=28&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Pow(x, n)", type: "Medium Problem", link: "https://leetcode.com/problems/powx-n/", resource: "LeetCode" },
            ]},
            { day: 44, title: "Subset + Subsequence Hard Practice", note: "", tasks: [
                { desc: "Subset + Subsequence Hard Practice", type: "Video", link: "https://www.youtube.com/watch?v=gdifkIwCJyg&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=34&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Combination Sum II", type: "Medium Problem", link: "https://leetcode.com/problems/combination-sum-ii/", resource: "LeetCode" },
                { desc: "Permutation Sequence", type: "Hard Problem", link: "https://leetcode.com/problems/permutation-sequence/", resource: "LeetCode" },
            ]},
            { day: 45, title: "Backtracking Revision: Maze / Strings", note: "", tasks: [
                { desc: "Backtracking Revision: Maze / Strings", type: "Video", link: "https://www.youtube.com/watch?v=zg5v2rlV1tM&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=36&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Generate Parentheses", type: "Medium Problem", link: "https://leetcode.com/problems/generate-parentheses/", resource: "LeetCode" },
            ]},
            { day: 46, title: "Merge Sort + Quick Sort Deep Revision", note: "", tasks: [
                { desc: "Merge Sort + Quick Sort Deep Revision", type: "Video", link: "https://www.youtube.com/watch?v=unxAnJBy12Q&pp=ygUhbWVyZ2Ugc29ydCBhbmQgcXVpY2sgc29ydCBpbiBqYXZh", resource: "YouTube" },
                { desc: "Kth Largest Element in an Array", type: "Medium Problem", link: "https://leetcode.com/problems/kth-largest-element-in-an-array/", resource: "LeetCode" },
            ]},
            { day: 47, title: "Subsets / Permutations Final Revision", note: "", tasks: [
                { desc: "Subsets / Permutations Final Revision", type: "Video", link: "https://www.youtube.com/watch?v=gDGw0cvFXPQ&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=35&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Subsets III (custom variations)", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 48, title: "All Backtracking Combined", note: "", tasks: [
                { desc: "All Backtracking Combined", type: "Video", link: "https://www.youtube.com/watch?v=zg5v2rlV1tM&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=36&pp=gAQBiAQB", resource: "YouTube" },
                { desc: "Letter Case Permutation", type: "Medium Problem", link: "https://leetcode.com/problems/letter-case-permutation/", resource: "LeetCode" },
            ]},
            { day: 49, title: "MOCK TEST 1", note: "", tasks: [
                { desc: "Subsets", type: "Practice", link: "https://leetcode.com/problems/subsets/", resource: "LeetCode" },
                { desc: "Permutations", type: "Practice", link: "https://leetcode.com/problems/permutations/", resource: "LeetCode" },
                { desc: "Combination Sum", type: "Practice", link: "https://leetcode.com/problems/combination-sum/", resource: "LeetCode" },
                { desc: "N Queens", type: "Practice", link: "https://leetcode.com/problems/n-queens/", resource: "LeetCode" },
                { desc: "Word Search", type: "Practice", link: "https://leetcode.com/problems/word-search/", resource: "LeetCode" },
            ]},
            { day: 50, title: "Final Recursion + Backtracking Wrap-up", note: "", tasks: [
                { desc: "Review all notes", type: "Revision", link: "#", resource: "Self-Study" },
                { desc: "All subsets/permutations variants (5 chosen by you)", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 51, title: "Linked List Tutorial", note: "", tasks: [
                { desc: "Linked List Tutorial - Singly + Doubly + Circular (Theory + Code + Implementation)", type: "Video", link: "https://www.youtube.com/watch?v=58YbpRDc4yw&pp=iAQB", resource: "YouTube" },
                { desc: "Linked List basics", type: "Article", link: "https://www.geeksforgeeks.org/dsa/linked-list-data-structure/", resource: "GFG" },
                { desc: "Reverse Linked List", type: "Easy Problem", link: "https://leetcode.com/problems/reverse-linked-list/", resource: "LeetCode" },
                { desc: "Middle of the Linked List", type: "Easy Problem", link: "https://leetcode.com/problems/middle-of-the-linked-list/", resource: "LeetCode" },
            ]},
            { day: 52, title: "Linked List Interview Qs (Part 1)", note: "", tasks: [
                { desc: "Linked List Interview Questions (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=70tx7KcMROc&pp=iAQB", resource: "YouTube" },
                { desc: "Slow/Fast Pointer", type: "Article", link: "https://www.geeksforgeeks.org/floyds-cycle-finding-algorithm/", resource: "GFG" },
                { desc: "Linked List Cycle", type: "Easy Problem", link: "https://leetcode.com/problems/linked-list-cycle/", resource: "LeetCode" },
            ]},
            { day: 53, title: "Linked List Interview Qs (Part 2)", note: "", tasks: [
                { desc: "Linked List Interview Questions (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=70tx7KcMROc&pp=iAQB", resource: "YouTube" },
                { desc: "Merge techniques", type: "Article", link: "https://www.geeksforgeeks.org/merge-two-sorted-linked-lists/", resource: "GFG" },
                { desc: "Merge Sorted Lists", type: "Easy Problem", link: "https://leetcode.com/problems/merge-two-sorted-lists/", resource: "LeetCode" },
            ]},
            { day: 54, title: "Linked List Interview Qs (Part 3)", note: "", tasks: [
                { desc: "Linked List Interview Questions (Part 3)", type: "Video", link: "https://www.youtube.com/watch?v=70tx7KcMROc&pp=iAQB", resource: "YouTube" },
                { desc: "Removing nth node", type: "Article", link: "https://www.geeksforgeeks.org/remove-nth-node-from-end-of-the-linked-list/", resource: "GFG" },
                { desc: "Remove Nth Node", type: "Medium Problem", link: "https://leetcode.com/problems/remove-nth-node-from-end-of-list/", resource: "LeetCode" },
            ]},
            { day: 55, title: "Linked List Interview Qs (Part 4)", note: "", tasks: [
                { desc: "Linked List Interview Questions (Part 4)", type: "Video", link: "https://www.youtube.com/watch?v=70tx7KcMROc&pp=iAQB", resource: "YouTube" },
                { desc: "Reorder Linked List", type: "Article", link: "https://www.geeksforgeeks.org/problems/reorder-list/1", resource: "GFG" },
                { desc: "Reorder List", type: "Medium Problem", link: "https://leetcode.com/problems/reorder-list/", resource: "LeetCode" },
            ]},
            { day: 56, title: "Linked List Consolidation Day", note: "", tasks: [
                { desc: "Implement LL from scratch", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Palindrome Linked List", type: "Easy Problem", link: "https://leetcode.com/problems/palindrome-linked-list/", resource: "LeetCode" },
            ]},
            { day: 57, title: "Stacks and Queues Complete Tutorial", note: "", tasks: [
                { desc: "Stacks and Queues Complete Tutorial - Theory + Implementation + Types (Dynamic, Circular)", type: "Video", link: "https://www.youtube.com/watch?v=rHQI4mrJ3cg&pp=iAQB", resource: "YouTube" },
                { desc: "Stack intro", type: "Article", link: "https://www.geeksforgeeks.org/stack-data-structure/", resource: "GFG" },
                { desc: "Queue intro", type: "Article", link: "https://www.geeksforgeeks.org/queue-data-structure/", resource: "GFG" },
                { desc: "Valid Parentheses", type: "Easy Problem", link: "https://leetcode.com/problems/valid-parentheses/", resource: "LeetCode" },
            ]},
            { day: 58, title: "Stacks and Queues Interview Questions", note: "", tasks: [
                { desc: "Stacks and Queues Interview Questions (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=S9LUYztYLu4&pp=iAQB", resource: "YouTube" },
                { desc: "Stacks and Queues Interview Questions (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=S9LUYztYLu4&pp=iAQB", resource: "YouTube" },
                { desc: "Monotonic Stack", type: "Article", link: "https://www.youtube.com/watch?v=ymgnIIclCF0&list=PLCqQcm5h1gNmTFK1xJ9PPxsmLImyG2M3H&index=31&pp=gAQBiAQB", resource: "GFG" },
                { desc: "Min Stack", type: "Easy Problem", link: "https://leetcode.com/problems/min-stack/", resource: "LeetCode" },
            ]},
            { day: 59, title: "Stack/Queue Deep Practice", note: "", tasks: [
                { desc: "Implement stack using array", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Implement queue using array", type: "Practice", link: "#", resource: "Self-Study" },
                { desc: "Implement Queue using Stacks", type: "Easy Problem", link: "https://leetcode.com/problems/implement-queue-using-stacks/", resource: "LeetCode" },
                { desc: "Implement Stack using Queues", type: "Easy Problem", link: "https://leetcode.com/problems/implement-stack-using-queues/", resource: "LeetCode" },
            ]},
            { day: 60, title: "Deque + Sliding Window Prep", note: "", tasks: [
                { desc: "Deque", type: "Article", link: "https://www.geeksforgeeks.org/deque-set-1-introduction-applications/", resource: "GFG" },
                { desc: "Sliding Window Maximum", type: "Hard Problem", link: "https://leetcode.com/problems/sliding-window-maximum/", resource: "LeetCode" },
            ]},
            { day: 61, title: "Introduction to Trees", note: "", tasks: [
                { desc: "Binary Trees Tutorial - Introduction + Traversals + Code | BST", type: "Video", link: "https://www.youtube.com/watch?v=4s1Tcvm00pA&pp=iAQB", resource: "YouTube" },
                { desc: "Binary tree basics", type: "Article", link: "https://www.geeksforgeeks.org/binary-tree-data-structure/", resource: "GFG" },
                { desc: "Binary Tree Inorder Traversal", type: "Easy Problem", link: "https://leetcode.com/problems/binary-tree-inorder-traversal/", resource: "LeetCode" },
            ]},
            { day: 62, title: "Binary Trees Continued", note: "", tasks: [
                { desc: "Traversals (recursive + iterative)", type: "Article", link: "https://www.geeksforgeeks.org/tree-traversals-inorder-preorder-and-postorder/", resource: "GFG" },
                { desc: "Binary Tree Level Order Traversal", type: "Medium Problem", link: "https://leetcode.com/problems/binary-tree-level-order-traversal/", resource: "LeetCode" },
            ]},
            { day: 63, title: "Binary Trees Revision + Medium Problems", note: "", tasks: [
                { desc: "Symmetric Tree", type: "Easy Problem", link: "https://leetcode.com/problems/symmetric-tree/", resource: "LeetCode" },
                { desc: "Diameter of Binary Tree", type: "Easy Problem", link: "https://leetcode.com/problems/diameter-of-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 64, title: "Binary Tree Questions (Part 1)", note: "", tasks: [
                { desc: "Binary Tree Questions for Technical Interviews (Part 1)", type: "Video", link: "https://www.youtube.com/watch?v=9D-vP-jcc-Y&pp=iAQB", resource: "YouTube" },
                { desc: "DFS tree problems", type: "Article", link: "https://www.geeksforgeeks.org/tree-data-structure/", resource: "GFG" },
                { desc: "Max Depth", type: "Easy Problem", link: "https://leetcode.com/problems/maximum-depth-of-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 65, title: "Binary Tree Questions (Part 2)", note: "", tasks: [
                { desc: "Binary Tree Questions (Part 2)", type: "Video", link: "https://www.youtube.com/watch?v=9D-vP-jcc-Y&pp=iAQB", resource: "YouTube" },
                { desc: "Balanced Binary Tree", type: "Easy Problem", link: "https://leetcode.com/problems/balanced-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 66, title: "Binary Tree Questions (Part 3)", note: "", tasks: [
                { desc: "Binary Tree Questions (Part 3)", type: "Video", link: "https://www.youtube.com/watch?v=9D-vP-jcc-Y&pp=iAQB", resource: "YouTube" },
                { desc: "Path Sum", type: "Easy Problem", link: "https://leetcode.com/problems/path-sum/", resource: "LeetCode" },
                { desc: "Path Sum II", type: "Medium Problem", link: "https://leetcode.com/problems/path-sum-ii/", resource: "LeetCode" },
            ]},
            { day: 67, title: "Binary Tree Questions (Part 4)", note: "", tasks: [
                { desc: "Binary Tree Questions (Part 4)", type: "Video", link: "https://www.youtube.com/watch?v=9D-vP-jcc-Y&pp=iAQB", resource: "YouTube" },
                { desc: "Lowest Common Ancestor", type: "Medium Problem", link: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 68, title: "Tree Coding Day (Practice)", note: "", tasks: [
                { desc: "Binary Tree Zigzag Level Order Traversal", type: "Medium Problem", link: "https://leetcode.com/problems/binary-tree-zigzag-level-order-traversal/", resource: "LeetCode" },
                { desc: "Binary Tree Right Side View", type: "Medium Problem", link: "https://leetcode.com/problems/binary-tree-right-side-view/", resource: "LeetCode" },
            ]},
            { day: 69, title: "Heap + Priority Queue", note: "", tasks: [
                { desc: "Introduction to Heap Data Structure + Priority Queue + Heapsort Tutorial", type: "Video", link: "https://www.youtube.com/watch?v=Qf-TDPr0nYw&pp=iAQB", resource: "YouTube" },
                { desc: "Binary Heap", type: "Article", link: "https://www.geeksforgeeks.org/binary-heap/", resource: "GFG" },
                { desc: "Kth Largest Element", type: "Medium Problem", link: "https://leetcode.com/problems/kth-largest-element-in-an-array/", resource: "LeetCode" },
            ]},
            { day: 70, title: "Heap Continued", note: "", tasks: [
                { desc: "K Closest Points to Origin", type: "Medium Problem", link: "https://leetcode.com/problems/k-closest-points-to-origin/", resource: "LeetCode" },
                { desc: "Last Stone Weight", type: "Easy Problem", link: "https://leetcode.com/problems/last-stone-weight/", resource: "LeetCode" },
            ]},
            { day: 71, title: "HashMap + HashTable", note: "", tasks: [
                { desc: "Introduction to HashMap & HashTable in Java", type: "Video", link: "https://www.youtube.com/watch?v=XLbvmMz8Fr8&pp=iAQB", resource: "YouTube" },
                { desc: "HashMap Explanation", type: "Article", link: "https://www.geeksforgeeks.org/java-util-hashmap-in-java/", resource: "GFG" },
                { desc: "Two Sum", type: "Easy Problem", link: "https://leetcode.com/problems/two-sum/", resource: "LeetCode" },
            ]},
            { day: 72, title: "HashMap Practice", note: "", tasks: [
                { desc: "Top K Frequent Elements", type: "Medium Problem", link: "https://leetcode.com/problems/top-k-frequent-elements/", resource: "LeetCode" },
                { desc: "Valid Anagram", type: "Easy Problem", link: "https://leetcode.com/problems/valid-anagram/", resource: "LeetCode" },
            ]},
            { day: 73, title: "Segment Trees Tutorial", note: "", tasks: [
                { desc: "Segment Trees Tutorial | Range Queries | Interview Questions", type: "Video", link: "https://www.youtube.com/watch?v=ciHThtTVNto&pp=iAQB", resource: "YouTube" },
                { desc: "Segment Tree", type: "Article", link: "https://www.geeksforgeeks.org/segment-tree-set-1-sum-of-given-range/", resource: "GFG" },
            ]},
            { day: 74, title: "Karp‚ÄìRabin Algorithm", note: "", tasks: [
                { desc: "Karp-Rabin String Matching Algorithm | Substring Search Pattern", type: "Video", link: "https://www.youtube.com/watch?v=swciWFPq3NE&pp=iAQB", resource: "YouTube" },
                { desc: "Rabin-Karp", type: "Article", link: "https://www.geeksforgeeks.org/rabin-karp-algorithm-for-pattern-searching/", resource: "GFG" },
            ]},
            { day: 75, title: "Count Sort Algorithm", note: "", tasks: [
                { desc: "Count Sort Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=FOo820lJV1Y&pp=iAQB", resource: "YouTube" },
                { desc: "Counting Sort", type: "Article", link: "https://www.geeksforgeeks.org/counting-sort/", resource: "GFG" },
            ]},
            { day: 76, title: "Radix Sort Algorithm", note: "", tasks: [
                { desc: "Radix Sort Algorithm - Theory + Code", type: "Video", link: "https://www.youtube.com/watch?v=mLi6VQDqAOs&pp=iAQB", resource: "YouTube" },
                { desc: "Radix Sort", type: "Article", link: "https://www.geeksforgeeks.org/radix-sort/", resource: "GFG" },
                { desc: "Maximum Gap", type: "Hard Problem", link: "https://leetcode.com/problems/maximum-gap/", resource: "LeetCode" },
            ]},
            { day: 77, title: "Huffman Coding Greedy Algorithm", note: "", tasks: [
                { desc: "Huffman Coding Greedy Algorithm | Text Compression", type: "Video", link: "https://www.youtube.com/watch?v=XLfgeaYHinM&pp=iAQB", resource: "YouTube" },
                { desc: "Huffman Coding", type: "Article", link: "https://www.geeksforgeeks.org/huffman-coding-greedy-algo-3/", resource: "GFG" },
                { desc: "Build Huffman tree manually", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 78, title: "Mo's Algorithm", note: "", tasks: [
                { desc: "Easily Solve Range Query Problems with Mo's Algorithm", type: "Video", link: "https://www.youtube.com/watch?v=U4YmISZViSs&pp=iAQB", resource: "YouTube" },
                { desc: "Mo‚Äôs Algorithm", type: "Article", link: "https://www.geeksforgeeks.org/dsa/mos-algorithm-query-square-root-decomposition-set-1-introduction/", resource: "GFG" },
                { desc: "Offline query problems", type: "Practice", link: "#", resource: "Self-Study" },
            ]},
            { day: 79, title: "Binary Tree from Preorder & Inorder Traversal", note: "", tasks: [
                { desc: "Binary Tree from Preorder & Inorder Traversal - Advance Tree Questions", type: "Video", link: "https://www.youtube.com/watch?v=LFGBTFxHJII&pp=iAQB", resource: "YouTube" },
                { desc: "Construct BT from inorder + preorder", type: "Article", link: "https://www.geeksforgeeks.org/dsa/construct-tree-from-given-inorder-and-preorder-traversal/", resource: "GFG" },
                { desc: "Construct BT from Preorder + Inorder", type: "Medium Problem", link: "https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/", resource: "LeetCode" },
            ]},
            { day: 80, title: "Vertical Order Traversal of a Binary Tree", note: "", tasks: [
                { desc: "Vertical Order Traversal of a Binary Tree - Google Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=Qdr3ohMSxBo&pp=iAQB", resource: "YouTube" },
                { desc: "Vertical Order Traversal", type: "Article", link: "https://www.geeksforgeeks.org/dsa/vertical-order-traversal-of-binary-tree-using-map/", resource: "GFG" },
                { desc: "Vertical Order Traversal", type: "Hard Problem", link: "https://leetcode.com/problems/vertical-order-traversal-of-a-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 81, title: "Word Ladder", note: "", tasks: [
                { desc: "Word Ladder - LeetCode Hard - Google Phone Screen Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=2odLxQWYDi0&pp=iAQB", resource: "YouTube" },
                { desc: "Word Ladder BFS", type: "Article", link: "https://www.geeksforgeeks.org/word-ladder-length-of-shortest-chain-to-reach-a-target-word/", resource: "GFG" },
                { desc: "Word Ladder", type: "Hard Problem", link: "https://leetcode.com/problems/word-ladder/", resource: "LeetCode" },
            ]},
            { day: 82, title: "Two Sum IV - Input is a BST", note: "", tasks: [
                { desc: "Two Sum IV - Google, Amazon, Facebook Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=oB1EIXIDS8s&pp=iAQB", resource: "YouTube" },
                { desc: "BST Search for pair", type: "Article", link: "https://www.geeksforgeeks.org/find-a-pair-with-given-sum-in-bst/", resource: "GFG" },
                { desc: "Two Sum IV", type: "Easy Problem", link: "https://leetcode.com/problems/two-sum-iv-input-is-a-bst/", resource: "LeetCode" },
            ]},
            { day: 83, title: "Kth Smallest Element in a BST", note: "", tasks: [
                { desc: "Kth Smallest Element in a BST - Google, Amazon, Facebook Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=guzgnCSafg4&pp=iAQB", resource: "YouTube" },
                { desc: "BST inorder = sorted", type: "Article", link: "https://www.geeksforgeeks.org/dsa/inorder-traversal-of-binary-tree/", resource: "GFG" },
                { desc: "Kth Smallest Element", type: "Medium Problem", link: "https://leetcode.com/problems/kth-smallest-element-in-a-bst/", resource: "LeetCode" },
            ]},
            { day: 84, title: "Convert Binary Tree to Doubly Linked List", note: "", tasks: [
                { desc: "Convert Binary Tree to Doubly Linked List - FAANG Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=kNZ5VIkqReU&pp=iAQB", resource: "YouTube" },
                { desc: "BT to DLL conversion", type: "Article", link: "https://www.geeksforgeeks.org/problems/binary-tree-to-dll/1", resource: "GFG" },
                { desc: "Flatten Binary Tree", type: "Medium Problem", link: "https://leetcode.com/problems/flatten-binary-tree-to-linked-list/", resource: "LeetCode" },
            ]},
            { day: 85, title: "Correct Binary Tree That Has Two Nodes Swapped", note: "", tasks: [
                { desc: "Correct Binary Tree That Has Two Nodes Swapped - FAANG Interview Question", type: "Video", link: "https://www.youtube.com/watch?v=CxNRKTp6_9s&pp=iAQB", resource: "YouTube" },
                { desc: "Fix swapped BST", type: "Article", link: "https://www.geeksforgeeks.org/fix-two-swapped-nodes-of-bst/", resource: "GFG" },
                { desc: "Recover BST", type: "Medium Problem", link: "https://leetcode.com/problems/recover-binary-search-tree/", resource: "LeetCode" },
            ]},
            { day: 86, title: "Tree Hard Problems I", note: "", tasks: [
                { desc: "Lowest Common Ancestor of a Binary Tree", type: "Medium Problem", link: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/", resource: "LeetCode" },
                { desc: "Diameter of Binary Tree", type: "Easy Problem", link: "https://leetcode.com/problems/diameter-of-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 87, title: "Tree Hard Problems II", note: "", tasks: [
                { desc: "Binary Tree Maximum Path Sum", type: "Hard Problem", link: "https://leetcode.com/problems/binary-tree-maximum-path-sum/", resource: "LeetCode" },
                { desc: "Validate Binary Search Tree", type: "Medium Problem", link: "https://leetcode.com/problems/validate-binary-search-tree/", resource: "LeetCode" },
            ]},
            { day: 88, title: "Tree Hard Problems III", note: "", tasks: [
                { desc: "Serialize and Deserialize Binary Tree", type: "Hard Problem", link: "https://leetcode.com/problems/serialize-and-deserialize-binary-tree/", resource: "LeetCode" },
                { desc: "Balanced Binary Tree", type: "Easy Problem", link: "https://leetcode.com/problems/balanced-binary-tree/", resource: "LeetCode" },
            ]},
            { day: 89, title: "HashMap + Heap Revisions", note: "", tasks: [
                { desc: "Top K Frequent Elements", type: "Medium Problem", link: "https://leetcode.com/problems/top-k-frequent-elements/", resource: "LeetCode" },
                { desc: "K Closest Points to Origin", type: "Medium Problem", link: "https://leetcode.com/problems/k-closest-points-to-origin/", resource: "LeetCode" },
            ]},
            { day: 90, title: "Advanced Sorting Revision", note: "", tasks: [
                { desc: "Merge Intervals", type: "Medium Problem", link: "https://leetcode.com/problems/merge-intervals/", resource: "LeetCode" },
                { desc: "Largest Number", type: "Medium Problem", link: "https://leetcode.com/problems/largest-number/", resource: "LeetCode" },
            ]},
            { day: 91, title: "LinkedList + Stack Final Revision", note: "", tasks: [
                { desc: "Add Two Numbers", type: "Medium Problem", link: "https://leetcode.com/problems/add-two-numbers/", resource: "LeetCode" },
                { desc: "Min Stack", type: "Easy Problem", link: "https://leetcode.com/problems/min-stack/", resource: "LeetCode" },
            ]},
            { day: 92, title: "Recursion + Backtracking Final Revision", note: "", tasks: [
                { desc: "Generate Parentheses", type: "Medium Problem", link: "https://leetcode.com/problems/generate-parentheses/", resource: "LeetCode" },
                { desc: "Combination Sum", type: "Medium Problem", link: "https://leetcode.com/problems/combination-sum/", resource: "LeetCode" },
            ]},
            { day: 93, title: "Graph Basics (Bonus)", note: "", tasks: [
                { desc: "Number of Islands", type: "Medium Problem", link: "https://leetcode.com/problems/number-of-islands/", resource: "LeetCode" },
                { desc: "Clone Graph", type: "Medium Problem", link: "https://leetcode.com/problems/clone-graph/", resource: "LeetCode" },
            ]},
            { day: 94, title: "Sliding Window Revision", note: "", tasks: [
                { desc: "Longest Substring Without Repeating Characters", type: "Medium Problem", link: "https://leetcode.com/problems/longest-substring-without-repeating-characters/", resource: "LeetCode" },
                { desc: "Permutation in String", type: "Medium Problem", link: "https://leetcode.com/problems/permutation-in-string/", resource: "LeetCode" },
            ]},
            { day: 95, title: "Two Pointer Revision", note: "", tasks: [
                { desc: "3Sum", type: "Medium Problem", link: "https://leetcode.com/problems/3sum/", resource: "LeetCode" },
                { desc: "Container With Most Water", type: "Medium Problem", link: "https://leetcode.com/problems/container-with-most-water/", resource: "LeetCode" },
            ]},
            { day: 96, title: "DP Warm-up", note: "", tasks: [
                { desc: "Climbing Stairs", type: "Easy Problem", link: "https://leetcode.com/problems/climbing-stairs/", resource: "LeetCode" },
                { desc: "House Robber", type: "Medium Problem", link: "https://leetcode.com/problems/house-robber/", resource: "LeetCode" },
            ]},
            { day: 97, title: "DP Medium", note: "", tasks: [
                { desc: "Coin Change", type: "Medium Problem", link: "https://leetcode.com/problems/coin-change/", resource: "LeetCode" },
                { desc: "Partition Equal Subset Sum", type: "Medium Problem", link: "https://leetcode.com/problems/partition-equal-subset-sum/", resource: "LeetCode" },
            ]},
            { day: 98, title: "DP Hard", note: "", tasks: [
                { desc: "Longest Increasing Subsequence", type: "Medium Problem", link: "https://leetcode.com/problems/longest-increasing-subsequence/", resource: "LeetCode" },
                { desc: "Edit Distance", type: "Hard Problem", link: "https://leetcode.com/problems/edit-distance/", resource: "LeetCode" },
            ]},
            { day: 99, title: "Mock Interview Round 1", note: "", tasks: [
                { desc: "Two Sum", type: "Practice", link: "https://leetcode.com/problems/two-sum/", resource: "LeetCode" },
                { desc: "Search in Rotated Sorted Array", type: "Practice", link: "https://leetcode.com/problems/search-in-rotated-sorted-array/", resource: "LeetCode" },
                { desc: "Subsets", type: "Practice", link: "https://leetcode.com/problems/subsets/", resource: "LeetCode" },
                { desc: "Lowest Common Ancestor of a Binary Tree", type: "Practice", link: "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/", resource: "LeetCode" },
                { desc: "Kth Smallest Element in a BST", type: "Practice", link: "https://leetcode.com/problems/kth-smallest-element-in-a-bst/", resource: "LeetCode" },
            ]},
            { day: 100, title: "FINAL MOCK ROUND (FAANG Level)", note: "", tasks: [
                { desc: "Word Ladder", type: "Practice", link: "https://leetcode.com/problems/word-ladder/", resource: "LeetCode" },
                { desc: "Binary Tree Maximum Path Sum", type: "Practice", link: "https://leetcode.com/problems/binary-tree-maximum-path-sum/", resource: "LeetCode" },
                { desc: "Recover Binary Search Tree", type: "Practice", link: "https://leetcode.com/problems/recover-binary-search-tree/", resource: "LeetCode" },
                { desc: "K Closest Points to Origin", type: "Practice", link: "https://leetcode.com/problems/k-closest-points-to-origin/", resource: "LeetCode" },
                { desc: "Merge Intervals", type: "Practice", link: "https://leetcode.com/problems/merge-intervals/", resource: "LeetCode" },
                { desc: "3Sum", type: "Practice", link: "https://leetcode.com/problems/3sum/", resource: "LeetCode" },
                { desc: "Number of Islands", type: "Practice", link: "https://leetcode.com/problems/number-of-islands/", resource: "LeetCode" },
            ]},
        ];

        // Merge Java-specific Days 1-50 with the common Days 51-60 from the C++ schedule
        // const COMMON_ADVANCED_SCHEDULE = DEFAULT_SCHEDULE_CPP.slice(50);
        // DEFAULT_SCHEDULE_JAVA.push(...COMMON_ADVANCED_SCHEDULE);
        schedule_java = DEFAULT_SCHEDULE_JAVA;

        // --- End DSA Schedule Data ---

        // --- Local Storage Functions (Replaced Firebase Logic) ---

        // Functions to get localStorage keys (Simplified for Java-only)
        const getProgressKey = () => 'dsa_tracker_progress_java';
        const getCustomScheduleKey = () => 'dsa_tracker_custom_java';
        const getStartDateKey = () => 'dsa_tracker_start_date_java';

        /**
         * Loads all data from localStorage (simulating a database fetch).
         */
        function loadLocalData() {
            try {
                const progressJson = localStorage.getItem(getProgressKey());
                const customJson = localStorage.getItem(getCustomScheduleKey());

                // Progress is stored per day (we simulate a map of day -> {tasks: [], note: ''})
                const savedProgressMap = progressJson ? JSON.parse(progressJson) : {};
                
                // Custom schedule is stored as an array of day objects
                customSchedule = customJson ? JSON.parse(customJson) : [];
                
                return { savedProgressMap };
            } catch (error) {
                console.error("Error loading data from localStorage:", error);
                return { savedProgressMap: {} };
            }
        }

        /**
         * Renders a single day's schedule in the UI
         */
        function renderDay(day, index) {
            const dayElement = document.createElement('div');
            dayElement.className = 'glass-card p-6 rounded-xl mb-4 fade-in-slide-up';
            dayElement.style.animationDelay = `${index * 50}ms`;

            // Day header with completion status
            const completedTasks = day.tasks.filter(t => t.completed).length;
            const totalTasks = day.tasks.length;
            const isDayComplete = totalTasks > 0 && completedTasks === totalTasks;

            dayElement.innerHTML = `
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h3 class="text-xl font-bold text-slate-100">Day ${day.day}: ${day.title}</h3>
                        <p class="text-sm text-slate-400 mt-1">${completedTasks}/${totalTasks} tasks completed</p>
                    </div>
                    ${isDayComplete ? '<span class="text-emerald-400">‚úì Complete</span>' : ''}
                </div>

                <div class="space-y-3">
                    ${day.tasks.map((task, taskIndex) => `
                        <div class="flex items-start gap-3 p-2 rounded hover:bg-slate-800/50 transition">
                            <label class="flex-shrink-0 mt-0.5">
                                <input type="checkbox" class="hidden task-checkbox" 
                                       onchange="window.saveTaskCompletion(${day.day}, ${taskIndex}, this.checked)"
                                       ${task.completed ? 'checked' : ''}>
                                <div class="w-5 h-5 border-2 border-slate-600 rounded flex items-center justify-center transition-all cursor-pointer hover:border-blue-500">
                                    <svg class="w-3 h-3 text-white transform scale-0 transition-transform" 
                                         style="transform: ${task.completed ? 'scale(1)' : 'scale(0)'}"
                                         viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                            </label>
                            <div class="flex-grow">
                                <p class="text-slate-200 ${task.completed ? 'line-through text-slate-500' : ''}">${task.desc}</p>
                                <div class="flex items-center gap-2 mt-1">
                                    <span class="text-xs px-2 py-0.5 rounded bg-slate-700 text-slate-300">${task.type}</span>
                                    ${task.link !== '#' ? `
                                        <a href="${task.link}" target="_blank" class="text-xs text-blue-400 hover:text-blue-300 transition">
                                            ${task.resource} ‚Üí
                                        </a>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <!-- Notes Section -->
                <div class="mt-4 pt-4 border-t border-slate-700/50">
                    <label class="block text-sm font-medium text-slate-400 mb-2">Notes for Day ${day.day}:</label>
                    <textarea id="day-note-${day.day}" 
                              class="w-full bg-slate-800/50 border border-slate-700 rounded-lg p-3 text-slate-300 placeholder-slate-600"
                              placeholder="Add your notes for this day..."
                              onchange="window.saveDayNote(${day.day})"
                              rows="2">${day.note || ''}</textarea>
                </div>
            `;

            return dayElement;
        }

        /**
         * Renders the full schedule in the UI
         */
        function renderSchedule(schedule) {
            const container = document.getElementById('schedule-list');
            if (!container) return;
            
            container.innerHTML = ''; // Clear existing content
            
            schedule.forEach((day, index) => {
                const dayElement = renderDay(day, index);
                container.appendChild(dayElement);
            });
        }

        /**
         * Saves the current progress map and custom schedule to localStorage.
         */
        function saveLocalData(progressMap, customDays) {
            try {
                localStorage.setItem(getProgressKey(), JSON.stringify(progressMap));
                localStorage.setItem(getCustomScheduleKey(), JSON.stringify(customDays));
            } catch (error) {
                console.error("Error saving data to localStorage:", error);
            }
        }

        /**
         * NEW: Downloads a JSON report of the user's progress and custom schedule.
         */
        window.downloadReport = async function(format = 'pdf') {
            // Get UI elements
            const downloadButton = document.getElementById('download-report-btn');
            const spinner = document.getElementById('download-spinner');
            const statusMessage = document.getElementById('status-message');
            const statusText = document.getElementById('status-text');
            
            // Disable button and show spinner
            downloadButton.disabled = true;
            spinner.classList.remove('hidden');
            statusMessage.classList.remove('hidden');
            statusText.textContent = "Generating PDF report...";

            try {
                // Get report data
                const progressJson = localStorage.getItem(getProgressKey());
                const customJson = localStorage.getItem(getCustomScheduleKey());
                const startDateJson = localStorage.getItem(getStartDateKey());

                const progress = progressJson ? JSON.parse(progressJson) : {};
                const customSchedule = customJson ? JSON.parse(customJson) : [];
                const startDate = startDateJson || new Date().toISOString().split('T')[0];

                // Calculate statistics
                let totalTasks = 0;
                let completedTasks = 0;
                let totalDays = mergedSchedule.length;
                let completedDays = 0;

                mergedSchedule.forEach(day => {
                    const dayTasks = day.tasks.length;
                    const completedDayTasks = day.tasks.filter(t => t.completed).length;
                    totalTasks += dayTasks;
                    completedTasks += completedDayTasks;
                    if (dayTasks > 0 && completedDayTasks === dayTasks) {
                        completedDays++;
                    }
                });

                // Create a hidden element to render the report for PDF generation
                const reportElement = document.createElement('div');
                reportElement.style.position = 'absolute';
                reportElement.style.left = '-9999px';
                reportElement.style.width = '800px';
                reportElement.style.padding = '20px';
                reportElement.style.fontFamily = 'Arial, sans-serif';
                
                document.body.appendChild(reportElement);

                // Create report content in HTML format
                reportElement.innerHTML = `
                    <div id="pdf-content">
                        <h1>DSA Progress Report</h1>
                        <p>Generated on: ${new Date().toLocaleString()}</p>
                        <p>Start Date: ${startDate}</p>
                        
                        <div class="stats" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
                            <div class="stat-box" style="padding: 20px; background: #f3f4f6; border-radius: 8px;">
                                <h3>Overall Progress</h3>
                                <p>Tasks: ${completedTasks}/${totalTasks} (${((completedTasks/totalTasks)*100).toFixed(1)}%)</p>
                                <p>Days: ${completedDays}/${totalDays} Complete</p>
                            </div>
                            <div class="stat-box" style="padding: 20px; background: #f3f4f6; border-radius: 8px;">
                                <h3>Schedule Overview</h3>
                                <p>Total Days Planned: ${totalDays}</p>
                                <p>Custom Days Added: ${customSchedule.length}</p>
                            </div>
                        </div>

                        <div class="progress-list" style="margin-top: 20px;">
                            <h2>Detailed Progress</h2>
                            ${mergedSchedule.map(day => `
                                <div class="day-item" style="margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
                                    <h3>Day ${day.day}: ${day.title}</h3>
                                    <p>Progress: ${day.tasks.filter(t => t.completed).length}/${day.tasks.length} tasks completed</p>
                                    
                                    <ul class="task-list" style="list-style-type: none; padding-left: 0;">
                                        ${day.tasks.map(task => `
                                            <li class="task-item ${task.completed ? 'completed' : ''}" style="padding: 8px 0; border-bottom: 1px solid #e2e8f0; color: ${task.completed ? '#059669' : '#000'};">
                                                [${task.completed ? '‚úì' : ' '}] ${task.desc} (${task.type})
                                            </li>
                                        `).join('')}
                                    </ul>
                                    ${day.note ? `
                                        <div class="task-notes" style="margin-top: 10px; font-style: italic; color: #6b7280;">
                                            <strong>Notes:</strong><br>
                                            ${day.note.replace(/\n/g, '<br>')}
                                        </div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;

                // Use html2canvas to render the element (use higher scale for better quality)
                const canvas = await html2canvas(reportElement.querySelector('#pdf-content'), { scale: 2 });

                // Use jsPDF to create the PDF and paginate if content is tall
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();

                // Convert canvas (px) to PDF dimensions
                const imgWidthPx = canvas.width;
                const imgHeightPx = canvas.height;

                // px per mm on the PDF page
                const pxPerMm = imgWidthPx / pdfWidth;
                const pageHeightPx = Math.floor(pdfHeight * pxPerMm);

                let yOffset = 0;
                let pageCount = 0;

                while (yOffset < imgHeightPx) {
                    const sliceHeight = Math.min(pageHeightPx, imgHeightPx - yOffset);

                    // Create a temporary canvas to hold the page slice
                    const pageCanvas = document.createElement('canvas');
                    pageCanvas.width = imgWidthPx;
                    pageCanvas.height = sliceHeight;
                    const ctx = pageCanvas.getContext('2d');
                    // White background
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(0, 0, pageCanvas.width, pageCanvas.height);

                    // Draw slice from the full canvas
                    ctx.drawImage(canvas, 0, yOffset, imgWidthPx, sliceHeight, 0, 0, imgWidthPx, sliceHeight);

                    const imgData = pageCanvas.toDataURL('image/png');
                    const imgHeightMm = sliceHeight / pxPerMm;

                    if (pageCount > 0) pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, imgHeightMm);

                    yOffset += sliceHeight;
                    pageCount++;
                }

                pdf.save(`dsa_progress_report_${new Date().toISOString().split('T')[0]}.pdf`);

                // Clean up the hidden element
                document.body.removeChild(reportElement);

                // Show success message
                statusText.textContent = "PDF report generated successfully!";
                setTimeout(() => statusMessage.classList.add('hidden'), 3000);

            } catch (error) {
                console.error("Error generating PDF report:", error);
                statusText.textContent = "Error generating PDF report. Please check the console for details.";
                setTimeout(() => statusMessage.classList.add('hidden'), 5000);
            } finally {
                // Re-enable button and hide spinner regardless of success/failure
                downloadButton.disabled = false;
                spinner.classList.add('hidden');
            }
        }

        /**
         * NEW: Gets the start date from localStorage or sets it to today if not found.
         */
        function getOrSetStartDate() {
            let savedStartDate = localStorage.getItem(getStartDateKey());
            if (!savedStartDate) {
                const today = new Date();
                // Format to YYYY-MM-DD
                const year = today.getFullYear();
                const month = String(today.getMonth() + 1).padStart(2, '0');
                const day = String(today.getDate()).padStart(2, '0');
                savedStartDate = `${year}-${month}-${day}`;
                localStorage.setItem(getStartDateKey(), savedStartDate);
            }
            startDateStr = savedStartDate;
            
            // Initialize schedule data immediately after setting start date
            schedule_java = DEFAULT_SCHEDULE_JAVA;
            loadScheduleProgress();
        }

        // Call this when the page loads
        getOrSetStartDate();

        // --- Utility Functions ---

        /**
         * Calculates the current day number in the schedule based on the start date.
         */
        function calculateCurrentScheduleDay() {
            if (!startDateStr) return 1; // Guard against uninitialized start date
            const today = new Date();
            today.setHours(0, 0, 0, 0); 
            const startDate = new Date(startDateStr);
            startDate.setHours(0, 0, 0, 0); 

            const diffTime = today.getTime() - startDate.getTime();
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            const currentDay = diffDays + 1;
            
            return Math.max(1, currentDay); 
        }

        /**
         * Resets all progress by clearing localStorage entries.
         */
        window.resetProgress = function() {
            window.hideResetModal();
            document.getElementById('status-message').classList.remove('hidden');
            document.getElementById('status-text').textContent = "Resetting progress...";

            localStorage.removeItem(getProgressKey());
            localStorage.removeItem(getCustomScheduleKey());
            localStorage.removeItem(getStartDateKey()); // Also reset the start date
            
            // Reset local memory state
            customSchedule = [];

            // Reload the app to reflect the reset
            loadScheduleProgress(); 
            
            document.getElementById('status-text').textContent = "Progress and custom schedule successfully reset.";
            setTimeout(() => document.getElementById('status-message').classList.add('hidden'), 3000);
        }
        
        /**
         * Saves the custom schedule data to localStorage.
         */
        window.saveCustomSchedule = async function(event) {
            event.preventDefault();
            
            const form = document.getElementById('schedule-form');
            const daySections = form.querySelectorAll('.day-section');
            const newCustomDays = [];
            let isValid = true;
            
            daySections.forEach(section => {
                const dayInput = section.querySelector('input[name="day-number"]');
                const titleInput = section.querySelector('input[name="day-title"]');
                const tasksContainer = section.querySelector('.tasks-container');
                const taskRows = tasksContainer.querySelectorAll('.task-row');
                
                const day = parseInt(dayInput.value);
                const title = titleInput.value.trim();

                if (!day || !title) {
                    // Replaced alert()
                    document.getElementById('status-text').textContent = `Error: Day ${day || '[Missing]'} or Title is empty.`;
                    document.getElementById('status-message').classList.remove('hidden');
                    setTimeout(() => document.getElementById('status-message').classList.add('hidden'), 5000);

                    isValid = false;
                    return;
                }
                
                const tasks = [];
                taskRows.forEach(row => {
                    const desc = row.querySelector('input[name="task-desc"]').value.trim();
                    const type = row.querySelector('select[name="task-type"]').value;
                    const link = row.querySelector('input[name="task-link"]').value.trim();
                    const resource = row.querySelector('input[name="task-resource"]').value.trim();
                    
                    if (desc) {
                        tasks.push({ desc, type, link, resource });
                    }
                });

                if (tasks.length > 0) {
                    newCustomDays.push({ day, title, tasks, note: "" }); 
                }
            });

            if (!isValid) return;
            
            // Update local memory state for custom schedule
            customSchedule = newCustomDays;
            
            // Get the current progress map (which is not affected by custom schedule changes, only task completion)
            const { savedProgressMap } = loadLocalData();
            // Save custom schedule and the existing progress map
            saveLocalData(savedProgressMap, customSchedule);
            
            window.hideCustomizeModal();
            document.getElementById('status-text').textContent = "Custom schedule saved successfully! UI updating...";
            document.getElementById('status-message').classList.remove('hidden');
            setTimeout(() => document.getElementById('status-message').classList.add('hidden'), 3000);
            
            loadScheduleProgress(); // Reload the merged schedule to reflect changes
        }
        
        /**
         * Saves the completion status of a single task to localStorage.
         */
        async function saveTaskCompletion(day, taskIndex, isCompleted) {
            // 1. Update the local mergedSchedule state
            const dayEntry = mergedSchedule.find(d => d.day === day);

            if (!dayEntry) {
                console.error(`Attempted to save progress for non-existent Day ${day}`);
                return;
            }
            
            // Find the task in the mergedSchedule and update its completion status
            const taskToSave = dayEntry.tasks[taskIndex];
            if (taskToSave) {
                taskToSave.completed = isCompleted;
            }
            
            // 2. Rebuild the progress map from mergedSchedule for saving
            const progressMap = mergedSchedule.reduce((map, d) => {
                // Only save tasks and note (minimal progress info)
                map[d.day] = { 
                    day: d.day, 
                    tasks: d.tasks.map(t => ({ completed: t.completed })),
                    note: d.note || "" 
                };
                return map;
            }, {});

            // 3. Save to local storage
            saveLocalData(progressMap, customSchedule);
            
            // 4. Update Dashboard (UI update handled by calling this)
            calculateAndRenderDashboard();
        }

        let noteSaveTimer; // Timer for debouncing note saves

        /**
         * Saves the note for a specific day to localStorage.
         */
        window.saveDayNote = function(day) {
            const textarea = document.getElementById(`day-note-${day}`);
            const note = textarea.value;
            
            // Update local state (mergedSchedule)
            const dayEntry = mergedSchedule.find(d => d.day === day);
            if (dayEntry) {
                dayEntry.note = note;
            } else {
                 console.error(`Attempted to save note for non-existent Day ${day}`);
                 return;
            }

            // Debounce the save operation
            clearTimeout(noteSaveTimer);
            noteSaveTimer = setTimeout(() => {
                // Rebuild the progress map from mergedSchedule for saving
                const progressMap = mergedSchedule.reduce((map, d) => {
                    map[d.day] = { 
                        day: d.day, 
                        tasks: d.tasks.map(t => ({ completed: t.completed })),
                        note: d.note || "" 
                    };
                    return map;
                }, {});
                
                saveLocalData(progressMap, customSchedule);
                // Console log is fine here, no need for UI status update on every note save
            }, 1000); 
        }

        /**
         * Loads the full schedule structure and merges it with local progress data.
         */
        function loadScheduleProgress() {
             try {
                 document.getElementById('status-text').textContent = "Loading progress from local storage...";
                 const { savedProgressMap } = loadLocalData();
                 const baseSchedule = schedule_java;
 
                 // Create a map of base schedule days for efficient lookup
                 const baseScheduleMap = new Map(baseSchedule.map(day => [day.day, day]));
 
                 // Add or override with custom schedule days
                 customSchedule.forEach(customDay => {
                     baseScheduleMap.set(customDay.day, customDay);
                 });
 
                 // Convert map back to an array and sort
                 const tempMerged = Array.from(baseScheduleMap.values()).sort((a, b) => a.day - b.day);
 
                 window.totalRoadmapDays = tempMerged.length;
                 window.totalTasksInRoadmap = tempMerged.reduce((sum, d) => sum + (d.tasks ? d.tasks.length : 0), 0);
 
                 // Merge progress status
                 mergedSchedule = tempMerged.map(day => {
                     const savedDayProgress = savedProgressMap[day.day];
                     const finalTasks = day.tasks.map((task, index) => {
                         const savedTask = savedDayProgress?.tasks?.[index];
                         return { ...task, completed: savedTask?.completed || false };
                     });
 
                     return {
                         ...day,
                         tasks: finalTasks,
                         note: savedDayProgress?.note || day.note || ""
                     };
                 });
 
                 calculateAndRenderDashboard();
                 renderSchedule(mergedSchedule);
             } catch (err) {
                 console.error('Error in loadScheduleProgress:', err);
                 document.getElementById('status-text').textContent = "Error loading schedule ‚Äî check console.";
             } finally {
                 document.getElementById('status-message').classList.add('hidden');
             }
        }
        
        /**
         * Calculates and updates the Progress Dashboard and Streak Counter.
         */
        function calculateAndRenderDashboard() {
            const currentDayNumber = calculateCurrentScheduleDay();

            const totalTasksAll = window.totalTasksInRoadmap || 0;
            let completedTasksAll = 0;
            let currentStreak = 0;

            // Create a map for quick day lookups
            const scheduleMap = new Map(mergedSchedule.map(day => [day.day, day]));

            // 1. Calculate Total Progress from the live mergedSchedule
            mergedSchedule.forEach(dayEntry => {
                completedTasksAll += dayEntry.tasks.filter(t => t.completed).length;
            });

            // 2. Correctly Calculate Streak
            // Start checking from yesterday and go backwards.
            for (let day = currentDayNumber - 1; day > 0; day--) {
                const dayEntry = scheduleMap.get(day);
                if (!dayEntry || dayEntry.tasks.length === 0) {
                    break; // Stop if a day is missing or has no tasks
                }
                const isDayComplete = dayEntry.tasks.length > 0 && dayEntry.tasks.every(t => t.completed);
                if (isDayComplete) {
                    currentStreak++;
                } else {
                    break; // Streak is broken
                }
            }

            // 3. Render Dashboard
            const completionRate = totalTasksAll > 0 ? (completedTasksAll / totalTasksAll * 100).toFixed(0) : 0;
            document.getElementById('total-progress-text').textContent = `${completionRate}%`;
            document.getElementById('total-progress-count').textContent = `${completedTasksAll}/${totalTasksAll} Tasks`;
            document.getElementById('current-streak').textContent = currentStreak;
            document.getElementById('days-scheduled').textContent = (window.totalRoadmapDays !== undefined) ? window.totalRoadmapDays : mergedSchedule.length;
            
            // 4. Render Progress Ring
            const progressArc = document.getElementById('progress-ring-arc');
            if (progressArc) {
                const offset = CIRCUMFERENCE - (completionRate / 100) * CIRCUMFERENCE;
                progressArc.style.strokeDasharray = CIRCUMFERENCE;
                progressArc.style.strokeDashoffset = offset;
            }
        }


        
        // --- Customization UI Logic (Helper functions removed for brevity, keeping only renderSettingsForm) ---
        
        window.showCustomizeModal = function() {
            document.getElementById('customize-modal').classList.remove('hidden');
            renderSettingsForm();
        }

        window.hideCustomizeModal = function() {
            document.getElementById('customize-modal').classList.add('hidden');
        }
        
        function updateCustomizationControls() {
            const container = document.getElementById('days-container');
            const daySections = container.querySelectorAll('.day-section');
            const addButton = document.getElementById('add-day-btn');
            const limitMessage = document.getElementById('customize-limit-message');
            
            if (!addButton || !limitMessage) return; 
            
            const currentCount = daySections.length;
            
            if (currentCount >= MAX_CUSTOM_DAYS) {
                addButton.disabled = true;
                addButton.classList.add('opacity-50', 'cursor-not-allowed');
                limitMessage.classList.remove('hidden');
            } else {
                addButton.disabled = false;
                addButton.classList.remove('opacity-50', 'cursor-not-allowed');
                limitMessage.classList.add('hidden');
            }
        }


        function renderSettingsForm() {
            const container = document.getElementById('days-container');
            container.innerHTML = ''; // Clear previous form

            // Use the already loaded and merged schedule to populate the form
            mergedSchedule.forEach(day => {
                addDaySection(day.day, day.title, day.tasks);
            });
        }

        window.removeDaySection = function(button) {
            button.closest('.day-section').remove();
            updateCustomizationControls(); 
        }

        window.addDaySection = function(day = null, title = '', tasks = []) {
            const container = document.getElementById('days-container');
            const existingDaySections = container.querySelectorAll('.day-section');
            
            if (existingDaySections.length >= MAX_CUSTOM_DAYS && day === null) {
                return;
            }
            
            let nextDay = day;
            
            if (day === null) {
                const maxDay = Math.max(0, ...Array.from(existingDaySections).map(s => parseInt(s.querySelector('input[name="day-number"]').value) || 0));
                nextDay = maxDay + 1;
                title = "New Topic / Custom Day"; 
            }

            const sectionId = `day-section-${nextDay}-${Date.now()}`;

            let tasksHTML = tasks.map(t => getTaskRowHTML(t.desc, t.type, t.link, t.resource)).join('');
            if (tasks.length === 0) { // If no tasks were provided (e.g., for a brand new day), add one empty task row.
                tasksHTML = getTaskRowHTML();
            }

            const html = `
                <div class="day-section bg-gray-50 dark:bg-gray-800 p-5 rounded-xl shadow-lg border border-indigo-200 dark:border-gray-700" id="${sectionId}">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-xl font-bold text-indigo-600 dark:text-indigo-400">Day Setup</h4>
                        <button type="button" onclick="window.removeDaySection(this)" class="text-red-500 hover:text-red-700 font-bold">
                            Remove Day
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <label class="block">
                            <span class="text-gray-600 dark:text-gray-300 text-sm font-medium">Day Number (e.g., 45)</span>
                            <input type="number" name="day-number" value="${nextDay || ''}" min="1" class="mt-1 block w-full p-2 border rounded-md text-base bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600" required>
                        </label>
                        <label class="block col-span-2">
                            <span class="text-gray-600 dark:text-gray-300 text-sm font-medium">Day Title (e.g., Graphs and Heaps)</span>
                            <input type="text" name="day-title" value="${title}" class="mt-1 block w-full p-2 border rounded-md text-base bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600" required>
                        </label>
                    </div>

                    <div class="mb-4 text-gray-600 dark:text-gray-300">
                        <h5 class="text-lg font-semibold mb-2">Tasks for Day ${nextDay || '...'}</h5>
                        <div class="tasks-container space-y-2">
                            ${tasksHTML}
                        </div>
                    </div>
                    
                    <div class="text-right">
                        <button type="button" onclick="window.addTaskRow(this)" class="px-3 py-1 bg-gray-300 text-gray-800 text-sm font-semibold rounded-lg hover:bg-gray-400 transition">
                            + Add Task
                        </button>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
            
            // Scroll the new day into view within the modal
            const newSection = document.getElementById(sectionId);
            if (newSection) {
                newSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            updateCustomizationControls(); 
        }

        function getTaskRowHTML(desc = '', type = 'Practice', link = '', resource = '') {
            const types = ['Practice', 'Video', 'Article', 'Easy Problem', 'Medium Problem', 'Hard Problem', 'Revision', 'Break'];
            const options = types.map(t => `<option value="${t}" ${t === type ? 'selected' : ''}>${t}</option>`).join('');

            return `<div class="task-row grid grid-cols-1 md:grid-cols-12 gap-2 items-center"> <input type="text" name="task-desc" placeholder="Task Description" value="${desc}" class="md:col-span-4 mt-1 block w-full p-2 border rounded-md text-sm bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600"> <select name="task-type" class="md:col-span-2 mt-1 block w-full p-2 border rounded-md text-sm bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600">${options}</select> <input type="text" name="task-link" placeholder="https://..." value="${link}" class="md:col-span-3 mt-1 block w-full p-2 border rounded-md text-sm bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600"> <input type="text" name="task-resource" placeholder="Resource (e.g., LeetCode)" value="${resource}" class="md:col-span-2 mt-1 block w-full p-2 border rounded-md text-sm bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600"> <button type="button" onclick="this.closest('.task-row').remove()" class="md:col-span-1 text-red-500 hover:text-red-700 text-xs">Remove</button> </div>`;
        }

        // --- UI Rendering and Interaction ---

    /*
     * Visual overrides (CSS-like) applied via inline styles added in the <head> earlier
     * Note: We do not modify JavaScript logic. Styles below will work with the generated DOM.
     */

        function renderSchedule(data) {
            const listContainer = document.getElementById('schedule-list');
            listContainer.innerHTML = '';
            const currentScheduleDay = calculateCurrentScheduleDay();

            data.forEach(dayEntry => {
                const dayProgress = dayEntry.tasks.filter(t => t.completed).length;
                const totalTasks = dayEntry.tasks.length;
                const progressPercentage = (dayProgress / totalTasks) * 100;
                const isDayComplete = totalTasks > 0 && dayProgress === totalTasks;
                const isCurrentDay = dayEntry.day === currentScheduleDay;
                
                let dayCardClasses = `bg-card day-card-large rounded-2xl transition transform duration-300 hover:shadow-xl border-l-8 `;
                if (isCurrentDay) {
                    dayCardClasses += 'current-day border-emerald-500 shadow-2xl'; 
                } else if (isDayComplete) {
                    dayCardClasses += 'shadow-md border-teal-500'; 
                } else {
                    dayCardClasses += 'shadow-md border-blue-500'; 
                }

                const dayCard = document.createElement('div');
                dayCard.className = dayCardClasses;
                
                const currentDayTag = isCurrentDay ? 
                    `<span class="ml-3 px-3 py-1 bg-emerald-500 text-white text-xs font-extrabold rounded-full shadow-lg">TODAY (Day ${dayEntry.day})</span>` : 
                    (dayEntry.day < currentScheduleDay && !isDayComplete) ?
                    `<span class="ml-3 px-3 py-1 bg-orange-500 text-white text-xs font-extrabold rounded-full shadow-lg">Past Due</span>` : 
                    (isDayComplete) ?
                    `<span class="ml-3 px-3 py-1 bg-teal-500 text-white text-xs font-extrabold rounded-full shadow-lg">COMPLETE</span>` :
                    '';

                const cardHeaderColor = isCurrentDay ? 'text-emerald-600 dark:text-emerald-400' : isDayComplete ? 'text-teal-600 dark:text-teal-400' : 'text-blue-600 dark:text-blue-400';
                const progressBarColor = isDayComplete ? 'bg-green-500' : 'bg-blue-600';


                dayCard.innerHTML = `
                    <div class="flex justify-between items-center mb-4 border-b pb-3 border-gray-200 dark:border-gray-700">
                        <h2 class="text-xl md:text-2xl font-extrabold ${cardHeaderColor} flex items-center flex-wrap">
                            Day ${dayEntry.day}: ${dayEntry.title}
                            ${currentDayTag}
                        </h2>
                        <div class="text-md font-semibold ${isDayComplete ? 'text-green-600 dark:text-green-400' : 'text-gray-500 dark:text-gray-400'}">
                            ${dayProgress}/${totalTasks} Tasks
                        </div>
                    </div>
                    <!-- Progress Bar -->
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-4 overflow-hidden">
                        <div class="progress-bar-inner ${progressBarColor}" style="width: ${progressPercentage}%;"></div>
                    </div>
                    
                    <ul class="space-y-2 pt-2 mb-4">
                        ${dayEntry.tasks.map((task, index) => {
                            let icon = '';
                            const t = (task.type || '').toLowerCase();
                            if (t.includes('video')) {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Video task" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Video</title><path d="M3 5a2 2 0 012-2h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm8.5 5.5v6l5-3-5-3z"/></svg>`;
                            } else if (t.includes('article') || t.includes('read')) {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Article task" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Article</title><path d="M19 21H5a2 2 0 01-2-2V7a2 2 0 012-2h7l7 7v9a2 2 0 01-2 2z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                            } else if (t.includes('problem') || t.includes('practice') || t.includes('easy') || t.includes('medium') || t.includes('hard')) {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Problem task" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Problem</title><path d="M12 2l3 7h7l-5.5 4 2 7L12 16l-6.5 4 2-7L2 9h7l3-7z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                            } else if (t.includes('revision') || t.includes('rev')) {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Revision task" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Revision</title><path d="M21 12a9 9 0 11-3.4-6.8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 3v6h-6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                            } else if (t.includes('break')) {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Break task" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Break</title><path d="M8 3v2m0 12v2m8-14v2M8 7h8M8 17h8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                            } else {
                                icon = `<svg class="w-5 h-5 mr-3 text-accent flex-shrink-0" role="img" aria-label="Task" viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><title>Task</title><circle cx="12" cy="12" r="9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                            }

                            return `
                            <li class="p-3 bg-white dark:bg-gray-800/60 rounded-xl border border-slate-200 dark:border-gray-700 transition-colors duration-200 hover:bg-violet-50/50 dark:hover:bg-gray-700/80 shadow-sm">
                                <label for="day-${dayEntry.day}-task-${index}" class="flex items-center cursor-pointer group">
                                    <!-- Custom Checkbox -->
                                    <div class="w-5 h-5 flex-shrink-0 mr-4 border-2 border-gray-300 dark:border-gray-500 rounded-md flex items-center justify-center transition-all duration-200 group-hover:border-indigo-400 peer-checked:bg-emerald-500 peer-checked:border-emerald-500">
                                        <input type="checkbox" id="day-${dayEntry.day}-task-${index}"
                                            data-day="${dayEntry.day}"
                                            data-index="${index}"
                                            ${task.completed ? 'checked' : ''}
                                            class="opacity-0 absolute w-5 h-5 cursor-pointer peer">
                                        <!-- Checkmark SVG -->
                                        <svg class="hidden w-4 h-4 text-white peer-checked:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                    </div>
                                    ${icon}
                                    <div class="flex-1 text-gray-700 dark:text-gray-300 peer-checked:line-through peer-checked:text-gray-500 dark:peer-checked:text-gray-400 transition-colors duration-200">
                                    <span class="text-base">${task.desc}</span>
                                    <div class="flex items-center space-x-3 text-xs mt-1">
                                        <!-- Enhanced Resource Tag -->
                                        <span class="px-2 py-0.5 rounded-full font-medium ${task.type.includes('Video') ? 'bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300' : task.type.includes('Article') ? 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300' : task.type.includes('Problem') || task.type.includes('Practice') ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300' : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'}">${task.type}</span>
                                        <!-- Link with Icon -->
                                        <a href="${task.link}" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-semibold flex items-center">
                                            ${task.resource} 
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                            </svg>
                                        </a>
                                    </div>
                                </label>
                            </li>
                        `;
                        }).join('')}
                    </ul>
                    
                    <!-- Daily Notes Section (Styled better) -->
                    <div class="mt-6 p-4 rounded-xl bg-indigo-50 dark:bg-gray-800/50 border border-indigo-100 dark:border-gray-700">
                        <h4 class="text-lg font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-indigo-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                            Daily Notes & Reflection
                        </h4>
                        <textarea id="day-note-${dayEntry.day}" 
                                     class="w-full p-3 border rounded-lg text-sm bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 h-24 resize-none dark:placeholder-gray-400" 
                                     placeholder="What did you learn today? Key concepts, edge cases, and time complexities for problems solved..."
                                     oninput="window.saveDayNote(${dayEntry.day})"
                        >${dayEntry.note || ''}</textarea>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Notes automatically save to the browser's local storage.</p>
                    </div>
                `;
                listContainer.appendChild(dayCard);
            });

            // Re-attach event listeners after rendering
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.onchange = handleTaskChange;
            });
            
            // Scroll to the current day if it exists
            const currentDayElement = document.querySelector('.current-day');
            if (currentDayElement) {
                currentDayElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        /**
         * Handles the checkbox change event and saves the progress.
         */
        function handleTaskChange(event) {
            const checkbox = event.target;
            const day = parseInt(checkbox.dataset.day);
            const index = parseInt(checkbox.dataset.index);
            const isCompleted = checkbox.checked;

            // Optimistically update the UI label
            // The UI update is now handled automatically by the peer-checked CSS classes.

            // Save the change to LocalStorage
            saveTaskCompletion(day, index, isCompleted);
        }

        // Initializer: Simplified for local mode
        function initializeLocalApp() {
            // Determine the start date for the roadmap
            getOrSetStartDate(); 

            // Kick off data loading
            loadScheduleProgress();
        }
        
        window.showResetModal = function() {
            document.getElementById('reset-modal').classList.remove('hidden');
        }

        window.hideResetModal = function() {
            document.getElementById('reset-modal').classList.add('hidden');
        }

        // PWA Install prompt handling
        let deferredInstallPrompt = null;

        function showInstallButton(show) {
            const btn = document.getElementById('install-btn');
            if (!btn) return;
            if (show) {
                btn.classList.remove('hidden');
                btn.setAttribute('aria-hidden', 'false');
            } else {
                btn.classList.add('hidden');
                btn.setAttribute('aria-hidden', 'true');
            }
        }

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            deferredInstallPrompt = e;
            showInstallButton(true);
        });

        window.addEventListener('appinstalled', () => {
            // Clear the saved prompt and hide button
            deferredInstallPrompt = null;
            showInstallButton(false);
            console.log('PWA installed');
        });

        window.promptInstall = async function() {
            if (!deferredInstallPrompt) return;
            const btn = document.getElementById('install-btn');
            try {
                if (btn) btn.disabled = true;
                await deferredInstallPrompt.prompt();
                const choiceResult = await deferredInstallPrompt.userChoice;
                if (choiceResult && choiceResult.outcome === 'accepted') {
                    showInstallButton(false);
                }
            } catch (err) {
                console.error('Install prompt failed', err);
            } finally {
                if (btn) btn.disabled = false;
                deferredInstallPrompt = null;
            }
        };

        // Start the application
                window.onload = function() {
                        document.getElementById('status-message').classList.remove('hidden');
                        document.getElementById('status-text').textContent = "Loading progress from local storage...";

                                // No welcome popup: initialize app immediately

                        // Initialize the app
                        initializeLocalApp(); 
                };

        // Note: Service worker is registered in the <head> with an update handler. Duplicate registration removed.
    })(); // End of IIFE
    </script>
</body>
</html>
